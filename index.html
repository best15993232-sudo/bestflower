<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <title>전국 화환·화분·꽃 3시간 퀵배송</title>   
    <!-- Open Graph 메타 태그 (링크 공유시 미리보기) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="전국 화환·화분·꽃 3시간 퀵배송">
    <meta property="og:description" content="베스트플라워 | 근조화환, 축하화환, 개업화분, 꽃바구니 전문">
    <meta property="og:image" content="https://team-0aa767.flow.team/flowImg/FLOW_202601192455016_91215ef4-e5d5-4460-b1e1-68d02e3b5765.png">

    <!-- 트위터 카드 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="전국 화환·화분·꽃 3시간 퀵배송">
    <meta name="twitter:description" content="베스트플라워 | 근조화환, 축하화환, 개업화분, 꽃바구니 전문">
    <meta name="twitter:image" content="https://team-0aa767.flow.team/flowImg/FLOW_202601192455016_91215ef4-e5d5-4460-b1e1-68d02e3b5765.png">

    <style>
        @font-face {
            font-family: 'JoseonPalace';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.0/ChosunGs.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #f5f5f5;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header .logo {
            max-width: 200px;
            height: auto;
            margin-bottom: 16px;
        }

        .header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            color: #666;
        }

        /* 푸터 스타일 */
        .footer {
            margin-top: 30px;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .footer p {
            font-size: 12px;
            color: #888;
            line-height: 1.6;
        }

        .footer .copyright {
            font-weight: 500;
            color: #666;
            margin-bottom: 6px;
        }

        /* 메인 탭 스타일 */
        .main-tabs {
            display: flex;
            background: #fff;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .main-tab-btn {
            flex: 1;
            padding: 16px 10px;
            border: none;
            background: transparent;
            font-size: 17px;
            font-weight: 700;
            color: #666;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .main-tab-btn:hover {
            background: #f0f0f0;
        }

        .main-tab-btn.active {
            background: #333;
            color: #fff;
        }

        .main-tab-btn.phrases.active {
            background: #0b5c55;
        }

        .main-tab-btn.order.active {
            background: #fae100;
            color: #3c1e1e;
        }

        .main-tab-btn svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
            fill: none;
            stroke: currentColor;
        }

        .main-tab-btn.order svg {
            fill: currentColor;
            stroke: none;
        }

        .main-tab-content {
            display: none;
        }

        .main-tab-content.active {
            display: block;
        }

        /* 서브 탭 스타일 */
        .tabs {
            display: flex;
            background: #fff;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 14px 10px;
            border: none;
            background: transparent;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #f0f0f0;
        }

        .tab-btn.active {
            background: #333;
            color: #fff;
        }

        .tab-btn.funeral.active {
            background: #4a4a4a;
        }

        .tab-btn.wedding.active {
            background: #e91e63;
        }

        .tab-btn.promotion.active {
            background: #2196f3;
        }

        .tab-btn.opening.active {
            background: #ffa500;
        }

        /* 탭 콘텐츠 */
        .tab-content {
            display: none;
            width: 100%;
            max-width: 100%;
        }

        .tab-content.active {
            display: block;
        }

        /* 메시지 카드 */
        .message-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .message-card {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .message-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .message-number {
            width: 32px;
            height: 32px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: #555;
            flex-shrink: 0;
        }

        .funeral .message-number {
            background: #e8e8e8;
            color: #4a4a4a;
        }

        .wedding .message-number {
            background: #fce4ec;
            color: #e91e63;
        }

        .promotion .message-number {
            background: #e3f2fd;
            color: #2196f3;
        }

        .opening .message-number {
            background: #fff3e0;
            color: #ff9800;
        }

        .message-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.5;
            color: #333;
        }

        .copy-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: #f5f5f5;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .copy-btn:hover {
            background: #e0e0e0;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .copy-btn.copied {
            background: #4caf50;
        }

        .copy-btn.copied svg {
            stroke: #fff;
        }

        .copy-btn svg {
            width: 20px;
            height: 20px;
            stroke: #666;
            stroke-width: 2;
            fill: none;
        }

        /* 미리보기 버튼 */
        .preview-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: #e3f2fd;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .preview-btn:hover {
            background: #bbdefb;
        }

        .preview-btn:active {
            transform: scale(0.95);
        }

        .preview-btn svg {
            width: 20px;
            height: 20px;
            stroke: #1976d2;
            stroke-width: 2;
            fill: none;
        }

        /* 복사 완료 토스트 */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: #333;
            color: #fff;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10001;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            pointer-events: none;
            text-align: center;
            word-break: keep-all;
            max-width: 280px;
        }

        .toast.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        /* 모바일 반응형 */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 20px;
            }

            .main-tab-btn {
                padding: 14px 8px;
                font-size: 15px;
            }

            .tab-btn {
                padding: 10px 4px;
                font-size: 12px;
            }

            .message-card {
                padding: 14px;
            }

            .message-text {
                font-size: 14px;
            }

            .message-number {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .copy-btn {
                width: 40px;
                height: 40px;
            }
        }

        /* 카테고리 라벨 */
        .category-label {
            font-size: 13px;
            color: #888;
            margin-bottom: 12px;
            padding-left: 4px;
        }

        /* 보내는 분 문구 섹션 */
        .sender-section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .sender-section .sender-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-top: 10px;
            margin-bottom: 10px;
            display: block;
        }

        .sender-section .sender-text {
            font-size: 14px;
            color: #333;
            margin-top: 12px;
            margin-bottom: 10px;
            display: block;
        }

        .sender-section .sender-input {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .sender-section .sender-input:focus {
            outline: none;
            border-color: #333;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }

        .sender-section .sender-input::placeholder {
            color: #aaa;
        }

        /* 미리보기 섹션 */
        .preview-section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .preview-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }

        .preview-header:hover {
            opacity: 0.8;
        }

        .preview-section .preview-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            display: block;
        }

        .preview-hint {
            font-size: 12px;
            color: #999;
        }

        .preview-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            max-height: 500px;
            opacity: 1;
        }

        .preview-content.collapsed {
            max-height: 0;
            opacity: 0;
            margin-bottom: 0;
        }

        /* 세로쓰기 미리보기 */
        .preview-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
            border-radius: 8px;
            min-height: 350px;
        }

        .preview-card {
            background: #fff;
            border-radius: 4px;
            padding: 15px 10px;
            height: 300px;
            width: 45px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .preview-column {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-family: 'JoseonPalace', 'Gungsuh', '궁서체', '궁서', serif;
            font-weight: 600;
            color: #333;
            height: 100%;
            width: 100%;
        }

        .preview-column .char {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            width: 100%;
        }

        .preview-column .char.space {
            flex: 0.5;
        }

        .preview-column.left {
            color: #444;
        }

        .preview-column.right {
            color: #222;
        }

        .preview-empty {
            color: #aaa;
            font-size: 14px;
            text-align: center;
            padding: 40px 0;
        }

        /* PC 레이아웃 - 미리보기 우측 배치 */
        @media (min-width: 768px) {
            .container {
                max-width: 1100px;
            }

            .main-content {
                display: flex;
                flex-direction: row-reverse;
                gap: 24px;
                align-items: flex-start;
            }

            .preview-section {
                position: sticky;
                top: 20px;
                flex-shrink: 0;
                width: 280px;
                margin-bottom: 0;
            }

            .preview-display {
                min-height: 420px;
                padding: 25px;
            }

            .preview-card {
                height: 360px;
                width: 55px;
                padding: 18px 12px;
            }

            .content-section {
                flex: 1;
                min-width: 0;
            }

            .preview-hint {
                display: none;
            }

            .preview-content.collapsed {
                max-height: 500px;
                opacity: 1;
            }
        }

        /* 모바일 - 기존 레이아웃 유지 */
        @media (max-width: 767px) {
            .preview-section .preview-input {
                padding: 10px 12px;
                font-size: 14px;
            }

            .preview-display {
                gap: 15px;
                padding: 15px;
                min-height: 320px;
            }

            .preview-card {
                height: 280px;
                width: 40px;
                padding: 12px 8px;
            }
        }

        .sender-divider {
            height: 1px;
            background: #e0e0e0;
            margin: 16px 0;
        }

        @media (max-width: 480px) {
            .sender-section {
                padding: 14px;
            }

            .sender-section .sender-input {
                padding: 10px 12px;
                font-size: 14px;
            }
        }

        /* 주문서 섹션 스타일 */
        .order-section {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .order-section h2 {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #23706a;
        }

        .order-form-group {
            margin-bottom: 14px;
        }

        .order-form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .order-form-group label .required {
            color: #e91e63;
            margin-left: 2px;
        }

        .order-form-group label .optional {
            color: #999;
            font-weight: 400;
            font-size: 12px;
            margin-left: 4px;
        }

        .order-form-group .description {
            font-size: 12px;
            color: #888;
            margin-bottom: 6px;
        }

        .order-notice .highlight {
            background: linear-gradient(to top, #ffd951 50%, transparent 50%);
            font-size: 120%;
        }

        .order-form-group input,
        .order-form-group textarea,
        .order-form-group select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .order-form-group input:focus,
        .order-form-group textarea:focus,
        .order-form-group select:focus {
            outline: none;
            border-color: #fae100;
            box-shadow: 0 0 0 3px rgba(250, 225, 0, 0.2);
        }

        .order-form-group input::placeholder,
        .order-form-group textarea::placeholder {
            color: #aaa;
        }

        .order-form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .order-form-group select {
            cursor: pointer;
            background: #fff;
        }

        /* 등급 선택 라디오 버튼 스타일 */
        .grade-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .grade-option {
            flex: 1;
            min-width: 80px;
        }

        .grade-option input[type="radio"] {
            display: none;
        }

        .grade-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            text-align: center;
        }

        .grade-option input[type="radio"]:checked + label {
            border-color: #0b5c55;
            background: #0b5c55;
            color: #ffffff;
        }

        .grade-option label:hover {
            border-color: #0b5c55;
        }

        /* 주문서 미리보기/복사 영역 */
        .order-preview {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.8;
            color: #333;
            min-height: 200px;
        }

        /* 버튼 그룹 */
        .order-buttons {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }

        .btn-copy-order {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-copy-order.secondary {
            background: #f5f5f5;
            color: #333;
        }

        .btn-copy-order.secondary:hover {
            background: #e0e0e0;
        }

        .btn-copy-order svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
            fill: none;
        }

        .btn-kakao-order {
            flex: 2;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #fae100;
            color: #3c1e1e;
        }

        .btn-kakao-order:hover {
            background: #f5d800;
        }

        .btn-kakao-order:active {
            transform: scale(0.98);
        }

        .btn-kakao-order svg {
            width: 24px;
            height: 24px;
            fill: #3c1e1e;
        }

        /* 주문 안내 문구 */
        .order-notice {
            text-align: center;
            margin-top: 16px;
            padding: 8px;
        }

        .order-notice p {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin: 0;
            line-height: 1.6;
        }

        .order-notice .time-info {
            font-size: 13px;
            color: #333;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        @media (max-width: 480px) {
            .order-section {
                padding: 16px;
            }

            .order-section h2 {
                font-size: 16px;
            }

            .order-form-group input,
            .order-form-group textarea,
            .order-form-group select {
                padding: 10px 12px;
                font-size: 14px;
            }

            .grade-option label {
                padding: 10px 12px;
                font-size: 14px;
            }

            .order-buttons {
                flex-direction: column;
            }

            .btn-copy-order,
            .btn-kakao-order {
                width: 100%;
            }
        }

        /* 문구 선택 안내 */
        .go-to-phrases {
            background: #f0f0f0;
            border-radius: 8px;
            padding: 14px;
            margin-bottom: 16px;
            text-align: center;
        }

        .go-to-phrases p {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .go-to-phrases button {
            background: #0b5c55;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .go-to-phrases button:hover {
            background: #1565c0;
        }

        /* 배달장소 입력 스타일 */
        .place-input-wrapper {
            display: flex;
            gap: 8px;
        }

        .place-input-wrapper input {
            flex: 1;
        }

        .btn-place-search {
            padding: 12px 16px;
            background: #fae100;
            color: #3c1e1e;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: background 0.2s ease;
        }

        .btn-place-search:hover {
            background: #f5d800;
        }

        /* 배송 제한 안내 스타일 */
        .delivery-restriction-notice {
            display: none;
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 16px;
            margin-top: 12px;
        }

        .delivery-restriction-notice.show {
            display: block;
        }

        .delivery-restriction-notice .notice-title {
            font-size: 14px;
            font-weight: 600;
            color: #e65100;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .delivery-restriction-notice .notice-title::before {
            content: "⚠️";
        }

        .delivery-restriction-notice .alternative-products {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .delivery-restriction-notice .alt-product-card {
            flex: 1;
            min-width: 120px;
            max-width: calc(50% - 5px);
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }

        .delivery-restriction-notice .alt-product-card img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .delivery-restriction-notice .alt-product-card .alt-product-name {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .delivery-restriction-notice .alt-product-card .alt-product-price {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }


        .delivery-restriction-notice .btn-change-product {
            width: 100%;
            padding: 8px 12px;
            background: #ff9800;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .delivery-restriction-notice .btn-change-product:hover {
            background: #f57c00;
        }

        .delivery-restriction-notice .btn-change-product.selected {
            background: #4caf50;
        }

        @media (max-width: 480px) {
            .delivery-restriction-notice .alt-product-card {
                min-width: 100px;
            }
        }

        /* 상호검색 모달 스타일 */
        .place-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .place-modal.show {
            display: flex;
        }

        .place-modal-content {
            background: #fff;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .place-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .place-modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }

        .place-modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: #666;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .place-modal-close:hover {
            color: #333;
        }

        .place-modal-search {
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .place-modal-search form {
            display: flex;
            gap: 8px;
        }

        .place-modal-search input {
            flex: 1;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
        }

        .place-modal-search input:focus {
            outline: none;
            border-color: #fae100;
            box-shadow: 0 0 0 3px rgba(250, 225, 0, 0.2);
        }

        .place-modal-search button {
            padding: 12px 20px;
            background: #fae100;
            color: #3c1e1e;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .place-modal-search button:hover {
            background: #f5d800;
        }

        .place-search-status {
            padding: 12px 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .places-list {
            list-style: none;
            margin: 0;
            padding: 0;
            overflow-y: auto;
            flex: 1;
        }

        .places-list .item {
            padding: 14px 20px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .places-list .item:hover {
            background: #f9f9f9;
        }

        .places-list .item h5 {
            margin: 0 0 6px 0;
            font-size: 15px;
            font-weight: 600;
            color: #333;
        }

        .places-list .item .info span {
            display: block;
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .places-list .item .info .gray {
            color: #999;
            font-size: 12px;
        }

        .places-list .item .info .tel {
            color: #009900;
            margin-top: 4px;
        }

        .place-pagination {
            padding: 12px 20px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .place-pagination a {
            display: inline-block;
            padding: 6px 12px;
            margin: 0 4px;
            color: #666;
            text-decoration: none;
            border-radius: 4px;
        }

        .place-pagination a:hover {
            background: #f0f0f0;
        }

        .place-pagination a.on {
            font-weight: bold;
            color: #333;
            background: #fae100;
        }

        /* 메인 카테고리 탭 스타일 */
        .main-category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            background: #f5f5f5;
            padding: 6px;
            border-radius: 10px;
        }

        .main-category-btn {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .main-category-btn:hover {
            background: #e8e8e8;
        }

        .main-category-btn.active {
            background: #0b5c55;
            color: #fff;
        }

        /* 상품 그리드 컨테이너 */
        .product-grid-container {
            margin-bottom: 16px;
        }

        /* 상품 분류 그룹 */
        .product-group {
            margin-bottom: 20px;
        }

        .product-group:last-child {
            margin-bottom: 0;
        }

        .product-group-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .product-group-title {
            font-size: 15px;
            font-weight: 700;
            color: #333;
        }

        /* 좌우 이동 버튼 - < ○○ > 형식 */
        .product-slider-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-nav-buttons {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .product-nav-btn {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 16px;
            font-weight: 600;
            color: #999;
        }

        .product-nav-btn:hover {
            color: #666;
        }

        .product-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .product-nav-btn:disabled:hover {
            color: #999;
        }

        /* 페이지 인디케이터 (dots) */
        .product-nav-dots {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .product-nav-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
            transition: all 0.2s ease;
        }

        .product-nav-dot.active {
            background: #999;
        }

        /* 상품 슬라이더 */
        .product-slider-wrapper {
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .product-slider {
            display: flex;
            gap: 10px;
            transition: transform 0.3s ease;
        }

        .product-slider::-webkit-scrollbar {
            display: none;
        }

        .product-card {
            flex: 0 0 calc(33.333% - 7px);
            min-width: calc(33.333% - 7px);
            max-width: calc(33.333% - 7px);
            cursor: pointer;
            border: 3px solid transparent;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.2s ease;
            background: #fff;
        }

        .product-card:hover {
            border-color: #0b5c55;
        }

        .product-card.selected {
            border-color: #0b5c55;
            box-shadow: 0 4px 12px rgba(11, 92, 85, 0.3);
        }

        .product-card img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            display: block;
        }

        .product-card .product-info {
            text-align: center;
            padding: 10px 6px;
            background: #f9f9f9;
        }

        .product-card .product-grade {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }

        .product-card .product-price {
            font-size: 12px;
            font-weight: 500;
            color: #0b5c55;
        }

        .product-card.selected .product-info {
            background: #0b5c55;
        }

        .product-card.selected .product-grade,
        .product-card.selected .product-price {
            color: #fff;
        }

        /* 상품 설명 영역 */
        .product-group-description {
            margin-bottom: 6px;
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        /* 상품 그룹 구분선 */
        .product-group-divider {
            height: 1px;
            background: #e8e8e8;
            margin: 20px 0;
        }

        @media (max-width: 480px) {
            .main-category-btn {
                padding: 10px 4px;
                font-size: 13px;
            }

            .product-group-title {
                font-size: 14px;
            }

            .product-card {
                flex: 0 0 calc(33.333% - 7px);
                min-width: calc(33.333% - 7px);
                max-width: calc(33.333% - 7px);
            }

            .product-card .product-grade {
                font-size: 12px;
            }

            .product-card .product-price {
                font-size: 11px;
            }

            .product-nav-btn {
                width: 24px;
                height: 24px;
                font-size: 14px;
            }

            .product-nav-buttons {
                margin-top: 8px;
                gap: 6px;
            }

            .product-nav-dot {
                width: 6px;
                height: 6px;
            }

            .product-nav-dots {
                gap: 4px;
            }
        }


        /* 이미지 확대 오버레이 */
        .image-zoom-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
        }

        .image-zoom-overlay.active {
            display: flex;
        }

        .image-zoom-overlay img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .image-zoom-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .image-zoom-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .image-zoom-hint {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .image-zoom-select-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 14px 40px;
            background: #0b5c55;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .image-zoom-select-btn:hover {
            background: #094a44;
        }

        /* 이미지 확대 - 상품 설명 (하단 배치) */
        .image-zoom-description {
            position: absolute;
            bottom: 130px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            text-align: center;
            max-width: 90%;
            word-break: keep-all;
        }

        /* 카톡 문의 플로팅 버튼 */
        .kakao-float-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            background: #fae100;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 9999;
            text-decoration: none;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .kakao-float-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }

        .kakao-float-btn svg {
            width: 28px;
            height: 28px;
            fill: #3c1e1e;
        }

        .kakao-float-btn span {
            font-size: 9px;
            font-weight: 700;
            color: #3c1e1e;
            margin-top: 2px;
        }

        /* 미리보기 안내 말풍선 */
        .preview-tooltip {
            position: absolute;
            top: -32px;
            right: 0;
            background: #1976d2;
            color: #fff;
            font-size: 11px;
            font-weight: 600;
            padding: 6px 10px;
            white-space: nowrap;
            z-index: 10;
        }

        .preview-tooltip::after {
            content: '';
            position: absolute;
            bottom: -6px;
            right: 16px;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #1976d2;
        }

        .message-card.with-tooltip {
            position: relative;
            overflow: visible;
        }

        /* 배송사진 섹션 */
        .delivery-photos-section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .delivery-photos-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .delivery-photos-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .delivery-photos-header a {
            font-size: 13px;
            color: #888;
            text-decoration: none;
        }

        .delivery-photos-header a:hover {
            color: #333;
        }

        .delivery-photos-header .title-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .delivery-photos-header .update-date {
            font-size: 12px;
            font-weight: 400;
            color: #999;
        }

        .delivery-slider-container {
            position: relative;
            overflow: hidden;
        }

        .delivery-slider {
            display: flex;
            gap: 10px;
            animation: deliveryCarousel 30s linear infinite;
        }

        .delivery-slider:hover {
            animation-play-state: paused;
        }

        @keyframes deliveryCarousel {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        .delivery-slide {
            flex: 0 0 100px;
            min-width: 100px;
            text-decoration: none;
            color: inherit;
        }

        .delivery-slide .photo {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
            background: #f0f0f0;
        }

        .delivery-slide .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .delivery-slide:hover .photo img {
            transform: scale(1.05);
        }

        .delivery-slide .name {
            display: block;
            margin-top: 6px;
            font-size: 11px;
            color: #666;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .delivery-loading {
            text-align: center;
            padding: 40px;
            color: #888;
            font-size: 14px;
        }

        @media (max-width: 480px) {
            .delivery-slide {
                flex: 0 0 85px;
                min-width: 85px;
            }

            .delivery-slide .name {
                font-size: 10px;
            }
        }
    </style>
    <!-- 카카오맵 SDK -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2a2757bfe21447887d8528345d95588d&libraries=services"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://team-0aa767.flow.team/flowImg/FLOW_202601143912450_bb6ad82b-564a-42b7-80bd-450e54727cf4.png" alt="베스트플라워" class="logo">
        </div>

        <!-- 배송사진 섹션 -->
        <div class="delivery-photos-section">
            <div class="delivery-photos-header">
                <div class="title-wrap">
                    <h3>실제 배송사진</h3>
                    <span class="update-date" id="deliveryUpdateDate"></span>
                </div>
                <a href="https://www.bestflower.co.kr/board/board_list/code/afterpicture" target="_blank">더보기 &gt;</a>
            </div>
            <div class="delivery-slider-container">
                <div class="delivery-slider" id="deliverySlider">
                    <!-- 배송사진이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>

        <!-- 메인 탭 버튼 -->
        <div class="main-tabs">
            <button class="main-tab-btn phrases active" onclick="showMainTab('phrases')">
                <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                리본문구
            </button>
            <button class="main-tab-btn order" onclick="showMainTab('order')">
                <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
                주문하기
            </button>
        </div>

        <!-- 리본문구 보기 탭 콘텐츠 -->
        <div id="phrasesTab" class="main-tab-content active">
            <!-- 보내는 분 문구 섹션 -->
            <div class="sender-section">
                <label class="sender-label">리본문구 보내는분</label>
                <input type="text" id="senderInput" class="sender-input" placeholder="예: 베스트플라워 대표이사 홍길동" oninput="saveSender(); updatePreview();">
                <label class="sender-label">리본문구 경조사어</label>
                <input type="text" id="previewInput" class="sender-input" placeholder="예: 謹弔" oninput="updatePreview()">
                <label class="sender-text">＊문구 복사시 보내는 분과 경조사어가 함께 복사됩니다</label>
            </div>

            <!-- PC: 미리보기 + 콘텐츠 래퍼 -->
            <div class="main-content">
                <!-- 문구 미리보기 섹션 -->
                <div class="preview-section">
                    <div class="preview-header" onclick="togglePreview()">
                        <label class="preview-label">문구 미리보기</label>
                        <span class="preview-hint" id="previewHint">탭하여 열기</span>
                    </div>
                    <div id="previewContent" class="preview-content collapsed">
                        <div id="previewDisplay" class="preview-display">
                            <p class="preview-empty">보내는 분과 리본문구를 입력하면<br>미리보기가 표시됩니다</p>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 섹션 (탭 + 목록) -->
                <div class="content-section">
                    <!-- 탭 버튼 -->
                    <div class="tabs">
                        <button class="tab-btn funeral active" onclick="showTab('funeral')">장례</button>
                        <button class="tab-btn wedding" onclick="showTab('wedding')">결혼</button>
                        <button class="tab-btn promotion" onclick="showTab('promotion')">승진/취임</button>
                        <button class="tab-btn opening" onclick="showTab('opening')">개업/이전</button>
                    </div>

                    <!-- 장례 탭 콘텐츠 -->
                    <div id="funeral" class="tab-content funeral active">
                        <p class="category-label">장례 조문 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">삼가 故人의 冥福을 빕니다 (삼가 고인의 명복을 빕니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 故人의 冥福을 빕니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 故人의 冥福을 빕니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">삼가 고인의 명복을 빕니다 (한글)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 고인의 명복을 빕니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 고인의 명복을 빕니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">謹弔 (근조)</p>
                                <button class="copy-btn" onclick="copyText(this, '謹弔')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('謹弔')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">삼가 弔意를 표합니다 (삼가 조의를 표합니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 弔意를 표합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 弔意를 표합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">追慕 (추모)</p>
                                <button class="copy-btn" onclick="copyText(this, '追慕')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('追慕')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">하나님의 위로가 함께하시길 기도합니다</p>
                                <button class="copy-btn" onclick="copyText(this, '하나님의 위로가 함께하시길 기도합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('하나님의 위로가 함께하시길 기도합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">7</span>
                                <p class="message-text">召天 (소천)</p>
                                <button class="copy-btn" onclick="copyText(this, '召天')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('召天')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">8</span>
                                <p class="message-text">極樂往生發願 (극락왕생발원)</p>
                                <button class="copy-btn" onclick="copyText(this, '極樂往生發願')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('極樂往生發願')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 결혼 탭 콘텐츠 -->
                    <div id="wedding" class="tab-content wedding">
                        <p class="category-label">결혼 축하 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝結婚 (축결혼/신랑측)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝結婚')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝結婚')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝華婚 (축화혼/신부측)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝華婚')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝華婚')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">결혼을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '결혼을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('결혼을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">영원한 사랑과 행복을 기원합니다</p>
                                <button class="copy-btn" onclick="copyText(this, '영원한 사랑과 행복을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('영원한 사랑과 행복을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 승진/취임 탭 콘텐츠 -->
                    <div id="promotion" class="tab-content promotion">
                        <p class="category-label">승진 / 취임 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝昇進 (축 승진)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝昇進')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝昇進')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝榮轉 (축 영전)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝榮轉')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝榮轉')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">祝就任 (축 취임)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝就任')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝就任')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">승진을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '승진을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('승진을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">영전을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '영전을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('영전을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">취임을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '취임을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('취임을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 개업/이전 탭 콘텐츠 -->
                    <div id="opening" class="tab-content opening">
                        <p class="category-label">개업 / 이전 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝開業 (축 개업)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝開業')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝開業')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝發展 (축 발전)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝發展')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝發展')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">無窮한 發展을 祈願합니다 (무궁한 발전을 기원합니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '無窮한 發展을 祈願합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('無窮한 發展을 祈願합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">무궁한 발전을 기원합니다 (한글)</p>
                                <button class="copy-btn" onclick="copyText(this, '무궁한 발전을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('무궁한 발전을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">이전을 축하드리며 사업 번창하시기 바랍니다</p>
                                <button class="copy-btn" onclick="copyText(this, '이전을 축하드리며 사업 번창하시기 바랍니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('이전을 축하드리며 사업 번창하시기 바랍니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">♥들숨에 손님 날숨에 매출♥</p>
                                <button class="copy-btn" onclick="copyText(this, '♥들숨에 손님 날숨에 매출♥')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('♥들숨에 손님 날숨에 매출♥')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">7</span>
                                <p class="message-text">돈세다 힘들면 연락주세요</p>
                                <button class="copy-btn" onclick="copyText(this, '돈세다 힘들면 연락주세요')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('돈세다 힘들면 연락주세요')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">8</span>
                                <p class="message-text">오늘은 사장님 내일은 건물주</p>
                                <button class="copy-btn" onclick="copyText(this, '오늘은 사장님 내일은 건물주')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('오늘은 사장님 내일은 건물주')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div><!-- content-section -->
            </div><!-- main-content -->
        </div><!-- phrasesTab -->

        <!-- 주문하기 탭 콘텐츠 -->
        <div id="orderTab" class="main-tab-content">
            <!-- 문구 선택 안내 -->
            <div class="go-to-phrases">
                <p>경조사어/보내는분 문구를 선택하려면</p>
                <button onclick="showMainTab('phrases')">리본문구 보러가기</button>
            </div>

            <!-- 주문서 작성 섹션 -->
            <div class="order-section">
                <h2>주문서 작성</h2>

                <!-- 상품 카테고리 선택 -->
                <div class="order-form-group">
                    <!-- 메인 카테고리 탭 -->
                    <div class="main-category-tabs">
                        <button type="button" class="main-category-btn active" data-main-category="wreath" onclick="switchMainCategory('wreath')">화환</button>
                        <button type="button" class="main-category-btn" data-main-category="opening" onclick="switchMainCategory('opening')">개업선물</button>
                        <button type="button" class="main-category-btn" data-main-category="promotion" onclick="switchMainCategory('promotion')">승진선물</button>
                        <button type="button" class="main-category-btn" data-main-category="flower" onclick="switchMainCategory('flower')">꽃선물</button>
                    </div>

                    <!-- 상품 그리드 (상품분류별 그룹) -->
                    <div class="product-grid-container" id="productGridContainer">
                        <!-- JavaScript로 동적 생성 -->
                    </div>

                    <!-- 선택된 카테고리와 등급 저장 -->
                    <input type="hidden" id="selectedCategory" value="">
                    <input type="hidden" id="selectedGrade" value="고급">
                    <input type="hidden" id="selectedProductKey" value="">
                </div>

                <!-- 상세상품명 (생략가능) -->
                <div class="order-form-group">
                    <label>종류·색상 <span class="optional">(생략시 이미지 상품 배송)</span></label>
                    <p class="description">원하시는 종류나 색상이 있으면 알려주세요</p>
                    <input type="text" id="orderProductDetail" placeholder="예: 스투키, 흰색화분">
                </div>

                <div class="order-form-group">
                    <label>주문자명 <span class="required">*</span></label>
                    <p class="description">회사명 또는 담당자 성함을 기입해주세요</p>
                    <input type="text" id="orderCustomerName" placeholder="예: 베스트플라워">
                </div>

                <div class="order-form-group">
                    <label>주문자 핸드폰번호 <span class="required">*</span></label>
                    <input type="tel" id="orderCustomerPhone" placeholder="예: 010-1234-5678">
                </div>

                <div class="order-form-group">
                    <label>받는분 <span class="required">*</span></label>
                    <input type="text" id="orderRecipientName" placeholder="예: 신랑 혼주 홍길동">
                </div>

                <div class="order-form-group">
                    <label>받는분 핸드폰번호 <span class="optional">(생략가능)</span></label>
                    <input type="tel" id="orderRecipientPhone" placeholder="예: 010-5678-1234">
                </div>

                <div class="order-form-group">
                    <label>배달장소 <span class="required">*</span></label>
                    <div class="place-input-wrapper">
                        <input type="text" id="orderDeliveryPlace" placeholder="예: 서울 강남구 삼성동 OO예식장 OO홀">
                        <button type="button" class="btn-place-search" onclick="openPlaceSearchModal()">주소검색</button>
                    </div>
                    <div class="delivery-restriction-notice" id="deliveryRestrictionNotice">
                        <div class="notice-title">해당 지역은 다음 상품만 배송 가능합니다.</div>
                        <div class="alternative-products" id="alternativeProducts"></div>
                    </div>
                </div>

                <div class="order-form-group">
                    <label>배달시간 / 행사시간 <span class="optional">(생략시 3시간내 즉시배송)</span></label>
                    <input type="text" id="orderDeliveryTime" placeholder="예: 1월 10일 오후 2시 예식">
                </div>

                <div class="order-form-group">
                    <label>리본문구 보내는분 <span class="required">*</span></label>

                    <input type="text" id="orderRibbonText" placeholder="예: (주)베스트플라워 대표이사 홍길동">
                </div>

                <div class="order-form-group">
                    <label>리본문구 경조사어 <span class="required">*</span></label>

                    <input type="text" id="orderCondolence" placeholder="예: 祝結婚">
                </div>

                <div class="order-form-group">
                    <label>요청사항</label>
                    <textarea id="orderRequest" placeholder="배송 관련 요청사항이 있으시면 입력해주세요"></textarea>
                </div>

                <div class="order-preview" id="orderPreview">주문서를 작성하시면 여기에 미리보기가 표시됩니다.</div>

                <div class="order-notice">
                    <p><span class=highlight>✔️ 카카오톡 채팅창에 붙여넣기 해주세요</span></p>
                </div>

                <div class="order-buttons">
                    <button class="btn-copy-order secondary" onclick="copyOrderForm()">
                        <svg viewBox="0 0 24 24" stroke="currentColor"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        주문서 복사
                    </button>
                    <button class="btn-kakao-order" onclick="openKakaoChat()">
                        <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
                        카톡 주문하기
                    </button>
                </div>

                <div class="order-notice" style="margin-top: 12px;">
                    <p class="time-info">카톡주문 가능시간 | 평일 09:00~18:00</p>
                    <p class="time-info" style="display: flex; justify-content: center; align-items: center;">
                        <span>무통장입금</span>
                        <span style="margin: 0 8px;">|</span>
                        <span style="display: flex; flex-direction: column; align-items: flex-start;">
                            <span>하나은행 768-910006-74504</span>
                            <span>(주)베스트플라워</span>
                        </span>
                    </p>
                </div>
            </div>
        </div><!-- orderTab -->

        <!-- 푸터 -->
        <div class="footer">
            <p class="copyright">© 2025 (주)베스트플라워. All Rights Reserved.</p>
            <p>본 페이지의 모든 콘텐츠는 저작권법의 보호를 받습니다.<br>
            무단 전재, 복제, 배포 및 상업적 이용을 금지합니다.</p>
        </div>
    </div>

    <!-- 토스트 메시지 -->
    <div id="toast" class="toast">문구가 복사되었습니다</div>

    <!-- 상호검색 모달 -->
    <div id="placeSearchModal" class="place-modal">
        <div class="place-modal-content">
            <div class="place-modal-header">
                <h3>상호검색</h3>
                <button type="button" class="place-modal-close" onclick="closePlaceSearchModal()">&times;</button>
            </div>
            <div class="place-modal-search">
                <form onsubmit="event.preventDefault(); searchPlaces();">
                    <input type="text" id="placeKeyword" placeholder="장소명을 입력하세요 (예: 삼성서울병원)">
                    <button type="submit">검색</button>
                </form>
            </div>
            <div id="placeSearchStatus" class="place-search-status"></div>
            <ul id="placesList" class="places-list"></ul>
            <div id="placePagination" class="place-pagination"></div>
        </div>
    </div>

    <script>
        // =====================================================
        // 상품 데이터 (금액 수정: 각 등급의 price 값을 수정하세요)
        // =====================================================
        const productData = {
            funeral: {
                name: '근조화환',
                images: [
                    { grade: '기본', price: '78,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1015_01.png&S=660x660', desc: '부담은 낮추고, 격식은 높인 3단 화환' },
                    { grade: '고급', price: '98,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1002_01.png&S=660x660', desc: '생화 & 포인트 꽃 추가! 고급 3단 화환' },
                    { grade: '최고급', price: '113,700원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1016_01.png&S=660x660', desc: '차별화된 크기, 4단 화환' }
                ],
                description: '기본→고급→최고급 순으로 꽃의 개수와 포인트 꽃이 증가합니다.'
            },
            congrats: {
                name: '축하화환',
                images: [
                    { grade: '기본', price: '78,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10510_01.png&S=660x660', desc: '부담은 낮추고, 격식은 높인 3단 화환' },
                    { grade: '고급', price: '96,400원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10518_01.png&S=660x660', desc: '생화 & 포인트 꽃 추가! 고급 3단 화환' },
                    { grade: '최고급', price: '122,800원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10526_01.png&S=660x660', desc: '차별화된 화려함, 4단 화환' }
                ],
                description: '기본→고급→최고급 순으로 꽃의 개수와 포인트 꽃이 증가합니다.'
            },
            opening_plant: {
                name: '관엽화분',
                images: [
                    { grade: '받는 분 맞춤제작', price: '상담 후 제작', url: 'https://team-0aa767.flow.team/flowImg/FLOW_20260119683137_d6aedd26-2d96-4a3a-9f10-9050f9497330.png', desc: '원하는 식물이 있거나 어떤 걸 보내야할지 고민되세요? 상담 후 결정하세요.' },
                    { grade: '금전수', price: '84,400원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1046_01.png&S=660x660', desc: '금전운 가득, 부자되세요! 개업 선물 BEST' },
                    { grade: '뱅갈고무나무', price: '95,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1042_01.png&S=660x660', desc: '행복의 상징, 뱅갈고무나무. 공기정화에 인테리어 효과까지 탁월해요.' },
                    { grade: '떡갈고무나무', price: '95,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1039_01.png&S=660x660', desc: '어디서든 쑥쑥 잘 자라는 강인함, 영원한 행복을 선물하세요' },
                    { grade: '극락조', price: '104,600원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1060_01.png&S=660x660', desc: '시원하게 뻗은 잎이 자아내는 이국적인 분위기! 집들이·확장이전 선물로 추천해요' },
                    { grade: 'S자 홍콩야자', price: '122,800원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/YK1020_01.png&S=660x660', desc: '시간을 들여 만들어낸 곡선의 아름다움, 행운을 불러오는 홍콩야자' }
                ],
                description: '개업&확장이전 스테디셀러! 인테리어에 공기정화까지 책임져요.'
            },
            promotion_plant: {
                name: '관엽화분',
                images: [
                    { grade: '받는 분 맞춤제작', price: '상담 후 제작', url: 'https://team-0aa767.flow.team/flowImg/FLOW_20260119683137_d6aedd26-2d96-4a3a-9f10-9050f9497330.png', desc: '원하는 식물이 있거나 어떤 걸 보내야할지 고민되세요? 상담 후 결정하세요.' },
                    { grade: '안스리움', price: '63,700원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1036_01.png&S=660x660', desc: '사시사철 피는 붉은 꽃이 포인트! 안스리움' },
                    { grade: '금전수', price: '63,700원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1035_01.png&S=660x660', desc: '금전운 가득, 부자되세요! 금전수' },
                    { grade: '스노우사파이어', price: '63,700원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/YK1016_01.png&S=660x660', desc: '물감을 뿌린듯 아름다운 무늬를 간직한 스노우사파이어' },
                    { grade: '인삼팬더', price: '95,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/YK1019_01.png&S=660x660', desc: '분재의 품격과 강인한 생명력을 동시에! 인삼팬더' }
                ],
                description: '승진선물로 인기! 책상 위에 올라가기 좋은 사이즈예요.'
            },
            orchid: {
                name: '동양란',
                images: [
                    { grade: '기본', price: '63,700원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WF1039_01.png&S=660x660', desc: '부담은 낮추고, 격식은 높인 동양란 스테디셀러' },
                    { grade: '고급', price: '100,100원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10308_01.png&S=660x660', desc: '고급스러운 무늬로 품격을 한층 더한 동양란' },
                    { grade: '최고급', price: '136,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10299_01.png&S=660x660', desc: '화려한 무늬는 물론, 화분까지 차별화한 최고급 동양란' }
                ],
                description: '기본→고급→최고급 순으로 화분과 품종이 달라집니다.'
            },
            phalaenopsis: {
                name: '서양란',
                images: [
                    { grade: '기본', price: '63,700원', url: 'https://team-0aa767.flow.team/flowImg/FLOW_202601144917332_03e2f3eb-9afd-4a0e-93f6-a6ca0f6bd634.png', desc: '꽃대 2대, 정성껏 보내드려요' },
                    { grade: '고급', price: '81,900원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10446_01.png&S=660x660', desc: '꽃대 4대, 풍성한 마음을 전하는 고급 만천홍' },
                    { grade: '최고급', price: '109,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10431_01.png&S=660x660', desc: '꽃대 6대 이상! 눈길을 사로잡는 화려함, 최고급 만천홍' }
                ],
                description: '기본→고급→최고급 순으로 꽃대(꽃줄기)의 개수가 증가합니다.'
            },
            flowers: {
                name: '꽃바구니',
                images: [
                    { grade: '받는 분 맞춤제작', price: '상담 후 제작', url: 'https://team-0aa767.flow.team/flowImg/FLOW_20260119683137_d6aedd26-2d96-4a3a-9f10-9050f9497330.png', desc: '원하는 색상이나 금액대가 있다면 알려주세요.' },
                    { grade: '노랑빛 소형', price: '54,600원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0001_01.png&S=660x660', desc: '산뜻&발랄, 통통 튀는 기운을 가득 담은 노랑빛 꽃바구니' },
                    { grade: '핑크빛 소형', price: '54,600원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/XJ1007_01.png&S=660x660', desc: '생기 넘치는 사랑스러움, 핑크빛 꽃바구니' },
                    { grade: '파스텔핑크 소형', price: '54,600원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/XJ1013_01.png&S=660x660', desc: '은은한 핑크빛 섬세함을 담은 파스텔핑크 꽃바구니' },
                    { grade: '노랑빛 중형', price: '68,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/NFB60-02_01.png&S=660x660', desc: '산뜻&발랄, 통통 튀는 기운을 담은 노랑빛 꽃바구니' },
                    { grade: '핑크빛 중형', price: '77,300원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0002_01.png&S=660x660', desc: '마음 가득 피어나는 따뜻함, 핑크빛 꽃바구니' },
                    { grade: '레드톤 중형', price: '109,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/XJ1017_01.png&S=660x660', desc: '강렬하게 마음을 사로잡는 와인&레드톤 꽃바구니' },
                    { grade: '핑크빛 대형', price: '109,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0003_01.png&S=660x660', desc: '화사하게 물드는 특별한 순간, 핑크빛 꽃바구니' },
                    { grade: '핑크빛 특대형', price: '136,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/XJ1031_01.png&S=660x660', desc: '향기로운 꽃과 소중한 마음을 가득 담아, 핑크빛 꽃바구니' }
                ],
                description: '소형→중형→대형 순으로 꽃의 개수와 볼륨이 증가합니다.'
            },
            bouquet: {
                name: '꽃다발',
                images: [
                    { grade: '받는 분 맞춤제작', price: '상담 후 제작', url: 'https://team-0aa767.flow.team/flowImg/FLOW_20260119683137_d6aedd26-2d96-4a3a-9f10-9050f9497330.png', desc: '원하는 색상이나 금액대가 있다면 알려주세요.' },
                    { grade: '보랏빛 소형', price: '54,600원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0002_01.png&S=660x660', desc: '연분홍빛 장미와 은은한 보라색 꽃의 조합으로 소중한 순간을 더욱 달콤하게♥' },
                    { grade: '노랑빛 중형', price: '68,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0003_06.png&S=660x660', desc: '산뜻&발랄, 통통 튀는 기운을 가득 담은 노랑빛 꽃다발' },
                    { grade: '핑크수국 중형', price: '68,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0007_01.png&S=660x660', desc: '몽실몽실한 수국으로 한층 풍성하게, 수국 꽃다발' },
                    { grade: '핑크장미 중형', price: '68,200원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0010_01.png&S=660x660', desc: '눈길을 사로잡는 핫핑크 장미가 가득♥ 러블리한 장미 꽃다발' },
                    { grade: '레드장미 대형', price: '95,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0009_01.png&S=660x660', desc: '클래식 is 베스트! 신선한 붉은 장미를 가득 담은 대형 꽃다발' },
                    { grade: '화이트 대형', price: '95,500원', url: 'https://www.bestflower.co.kr/IS/U=bestflower/HT0004_01.png&S=660x660', desc: '순백의 아름다움을, 고풍스러운 화이트 꽃다발' }
                ],
                description: '소형→중형→대형 순으로 꽃의 개수와 볼륨이 증가합니다.'
            }
        };

        // =====================================================
        // 메인 카테고리별 상품 매핑
        // =====================================================
        const categoryMapping = {
            wreath: ['funeral', 'congrats'],                           // 화환: 근조화환, 축하화환
            opening: ['congrats', 'opening_plant', 'phalaenopsis'],    // 개업선물: 축하화환, 관엽, 서양란
            promotion: ['promotion_plant', 'orchid', 'phalaenopsis'],  // 승진선물: 관엽, 동양란, 서양란
            flower: ['flowers', 'bouquet']                             // 꽃선물: 꽃바구니, 꽃다발
        };

        // =====================================================
        // 배송 제한 대체 상품 데이터
        // =====================================================
        const alternativeProducts = {
            // 축하화환 대체상품
            congrats_rice: {
                name: '쌀화환',
                price: '95,500원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1004_01.png&S=660x660'
            },
            congrats_rice_ribbon: {
                name: '쌀화환',
                dataName: '쌀리본',
                price: '95,500원',
                url: 'https://team-0aa767.flow.team/flowImg/FLOW_202601165965351_96b6a168-cbb1-4cd2-b63b-2ee002604152.png'
            },
            congrats_kimhae_objet: {
                name: '[김해] 신화환',
                price: '87,300원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1006_01.png&S=660x660'
            },
            congrats_kimhae_objet_2: {
                name: '[김해] 신화환 고급형',
                price: '114,600원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1007_01.png&S=660x660'
            },
            congrats_basket: {
                name: '꽃바구니',
                price: '54,600원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0001_01.png&S=660x660'
            },
            // 근조화환 대체상품
            funeral_objet: {
                name: '신화환',
                price: '78,200원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1018_01.png&S=660x660'
            },
            funeral_objet_2: {
                name: '신화환 고급형',
                price: '109,200원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1019_01.png&S=660x660'
            },
            funeral_rice: {
                name: '쌀화환',
                price: '95,500원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1025_01.png&S=660x660'
            },
            funeral_basket: {
                name: '근조바구니',
                price: '63,700원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1020_01.png&S=660x660'
            },
            funeral_basket_2: {
                name: '근조바구니 고급형',
                price: '72,800원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1021_01.png&S=660x660'
            },
            funeral_basket_3: {
                name: '근조바구니 최고급형',
                price: '118,300원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1022_01.png&S=660x660'
            },
            // 기본형 제외 고급형부터
            funeral_advanced: {
                name: '근조화환 고급형',
                price: '98,200원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1002_01.png&S=660x660'
            },
            funeral_premium: {
                name: '근조화환 최고급형',
                price: '113,700원',
                url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1016_01.png&S=660x660'
            }
        };

        // =====================================================
        // 배송 제한 규칙 데이터
        // =====================================================
        const deliveryRestrictions = {
            // 예식장 - 쌀화환
            congrats_rice: [
                '천호동성당', '방배동성당', '서초동교회', '양재온누리교회', '양재 온누리교회',
                '가회동성당', '안동교회', '혜화동성당', '분당성요한성당',
                '더빈컨벤션', '흥덕구 아모르아트', '청주 아모르아트', '579 아모르아트', '석곡동 305-2 아모르아트', '창원 리베라', '리베라컨벤션',
                '창원웨딩의전당', '창원 웨딩의 전당', '창원 웨딩의전당',
                '힐스카이웨딩', '힐스카이 웨딩', '르엘컨벤션'
            ],
            // 예식장 - 쌀리본
            congrats_rice_ribbon: [
                '대한성공회 서울교구', '명동성당', '명동대성당', '약현성당',
                '프란치스코 교육회관'
            ],
            // 예식장 - 리본만 전달 (안내만)
            congrats_ribbon_only: [
                '논현2동성당', '강남 더라움', '라움 아트센터', '빌라드지디 강남',
                '더세인트', '아펠가모 공덕', '라루체', '크레스트 72', '크레스트72'
            ],
            // 예식장 - 꽃바구니
            congrats_basket: [
                '빌라드지디 청담', '아시아드시티웨딩컨벤션 마리아주홀', '아시아드시티 웨딩홀 마리아주홀', '제주정원'
            ],
            // 예식장 - 김해 신화환
            congrats_kimhae: [
                'JW웨딩컨벤션센터', 'JW 웨딩컨벤션', '더파티웨딩홀', '더파티 웨딩홀', '메르시앙웨딩', '메르시앙 웨딩',
                '경남 김해 비즈컨벤션', '경남 김해 아이스퀘어호텔웨딩'
            ],
            // 장례식장 - 신화환
            funeral_objet: [
                '더조은요양병원', '수원시연화장', '수원 연화장', '경기도 연천', '경기 연천',
                '은하수공원', '전북 남원', '전라북도 남원', '전북 부안', '전라북도 부안',
                '전북 정읍', '전라북도 정읍', '전남 여수', '전라남도 여수',
                '김천의료원', '김천 의료원', '김천요양병원', '김천 요양병원', '김천요양우석병원',
                '김천제일병원', '김천 제일병원', '거붕백병원', '거제 백병원', '백병원 대명아임레디', '백병원 대명 아임레디',
                '경남 거창', '경상남도 거창', '쉴낙원 양산', '양산시민장례', '양산 시민장례', '양산 쉴낙원', '양산농협 양산',
                '양산농협장례식장', '양산 농협 장례식장', '양산 농협장례',
                '울산하늘공원', '울산 하늘공원', '동남권원자력', '동래봉생병원',
                '부산영락공원', '부산 영락공원', '영락공원 장례식장', '부산착한전문', '부산 착한전문', '부산 쉴낙원', '빌리브세웅',
                '중앙U병원'
            ],
            // 장례식장 - 쌀화환
            funeral_rice: [
                '예산중앙장례식장', '예산 중앙장례', '예산 청담장례', '전북 완도', '전라북도 완도',
                '경북 청도', '경상북도 청도', '경남 밀양', '경상남도 밀양'
            ],
            // 장례식장 - 근조바구니
            funeral_basket: [
                '고령영생병원', '고령 영생병원', '고령전문장례식장', '대가야장례식장',
                '상주시민장례식장', '상주 시민장례식장', '사천시 공설장례', '사천시누리원',
                '경남 산청', '경상남도 산청', '창녕군공설장례식장', '창녕 공설장례', '창녕서울병원',
                '창원 마산의료원', '상복공원', '함안하늘공원',
                '대구가톨릭대학교병원', '대구 가톨릭대'
            ],
            // 예외: 정읍 신태인장례식장, 밀양 밀양농협 -> 근조3단 가능
            funeral_exception: [
                '신태인장례식장', '밀양농협'
            ],
            // 고급형부터만 가능한 지역
            funeral_advanced_only: [
                '양평 양서농협', '양서농협',
                '강원 철원', '강원도 철원', '강원 화천', '강원도 화천', '강원 양구', '강원도 양구',
                '강원 고성', '강원도 고성', '강원 인제', '강원도 인제', '강원 동해', '강원도 동해',
                '강원 평창', '강원도 평창', '강원 횡성', '강원도 횡성', '강원 태백', '강원도 태백',
                '강원 삼척', '강원도 삼척',
                '전북 진안', '전라북도 진안', '전북 임실', '전라북도 임실', '전북 장수', '전라북도 장수',
                '전남 곡성', '전라남도 곡성',
                '경북 울진', '경상북도 울진', '경북 문경', '경상북도 문경', '경북 영양', '경상북도 영양',
                '경북 의성', '경상북도 의성', '경북 청송', '경상북도 청송', '경북 영덕', '경상북도 영덕',
                '경남 창녕', '경상남도 창녕', '경남 의령', '경상남도 의령'
            ]
        };

        // 현재 선택된 상품 정보
        let currentCategory = '';
        let currentGradeInModal = '고급';
        let currentMainCategory = 'wreath';
        let selectedProductKey = '';  // 선택된 상품 키 (예: 'funeral_고급')

        // 현재 배송 제한 상태
        let currentDeliveryRestriction = null;

        // =====================================================
        // 배달장소 입력 감지 및 배송 제한 체크
        // =====================================================
        function checkDeliveryRestriction(address) {
            const noticeEl = document.getElementById('deliveryRestrictionNotice');
            const productsEl = document.getElementById('alternativeProducts');
            const noticeTitleEl = noticeEl.querySelector('.notice-title');

            if (!address || address.trim() === '') {
                noticeEl.classList.remove('show');
                currentDeliveryRestriction = null;
                return;
            }

            const addr = address.trim();
            let restriction = null;
            let products = [];
            let noticeText = '해당 지역은 다음 상품만 배송 가능합니다.';

            // 현재 메인 카테고리가 화환인지 확인
            if (currentMainCategory !== 'wreath') {
                noticeEl.classList.remove('show');
                currentDeliveryRestriction = null;
                return;
            }

            // 현재 선택된 상품이 축하화환인지 근조화환인지 확인
            const isCongratsSelected = selectedProductKey.startsWith('congrats');
            const isFuneralSelected = selectedProductKey.startsWith('funeral');

            // 예외 처리: 신태인장례식장, 밀양농협은 일반 화환 가능
            for (const exception of deliveryRestrictions.funeral_exception) {
                if (addr.includes(exception)) {
                    noticeEl.classList.remove('show');
                    currentDeliveryRestriction = null;
                    return;
                }
            }

            // 축하화환 제한 체크 (축하화환 선택 시 또는 아무것도 선택 안 했을 때)
            if (isCongratsSelected || (!isFuneralSelected && !isCongratsSelected)) {
                // 리본만 전달 (안내만 표시)
                for (const place of deliveryRestrictions.congrats_ribbon_only) {
                    if (addr.includes(place)) {
                        restriction = 'congrats_ribbon_only';
                        noticeText = '해당 예식장은 화환 배송 후 혼주에게 리본만 전달됩니다.';
                        products = [];
                        break;
                    }
                }
                // 김해 신화환
                if (!restriction) {
                    for (const place of deliveryRestrictions.congrats_kimhae) {
                        if (addr.includes(place) || (addr.includes('김해') && addr.includes('웨딩'))) {
                            restriction = 'congrats_kimhae';
                            products = [
                                alternativeProducts.congrats_kimhae_objet,
                                alternativeProducts.congrats_kimhae_objet_2
                            ];
                            break;
                        }
                    }
                }
                // 쌀화환
                if (!restriction) {
                    for (const place of deliveryRestrictions.congrats_rice) {
                        if (addr.includes(place)) {
                            restriction = 'congrats_rice';
                            products = [alternativeProducts.congrats_rice];
                            break;
                        }
                    }
                }
                // 쌀리본
                if (!restriction) {
                    for (const place of deliveryRestrictions.congrats_rice_ribbon) {
                        if (addr.includes(place)) {
                            restriction = 'congrats_rice_ribbon';
                            products = [alternativeProducts.congrats_rice_ribbon];
                            break;
                        }
                    }
                }
                // 꽃바구니
                if (!restriction) {
                    for (const place of deliveryRestrictions.congrats_basket) {
                        if (addr.includes(place)) {
                            restriction = 'congrats_basket';
                            products = [alternativeProducts.congrats_basket];
                            break;
                        }
                    }
                }
            }

            // 근조화환 제한 체크 (근조화환 선택 시)
            if (isFuneralSelected) {
                // 신화환
                if (!restriction) {
                    for (const place of deliveryRestrictions.funeral_objet) {
                        if (addr.includes(place)) {
                            restriction = 'funeral_objet';
                            products = [
                                alternativeProducts.funeral_objet,
                                alternativeProducts.funeral_objet_2
                            ];
                            break;
                        }
                    }
                }
                // 쌀화환
                if (!restriction) {
                    for (const place of deliveryRestrictions.funeral_rice) {
                        if (addr.includes(place)) {
                            restriction = 'funeral_rice';
                            products = [alternativeProducts.funeral_rice];
                            break;
                        }
                    }
                }
                // 근조바구니
                if (!restriction) {
                    for (const place of deliveryRestrictions.funeral_basket) {
                        if (addr.includes(place)) {
                            restriction = 'funeral_basket';
                            products = [
                                alternativeProducts.funeral_basket,
                                alternativeProducts.funeral_basket_2,
                                alternativeProducts.funeral_basket_3
                            ];
                            break;
                        }
                    }
                }
                // 고급형부터만 가능 (기본형 선택 시에만 안내)
                if (!restriction) {
                    const isBasicSelected = selectedProductKey === 'funeral_기본';
                    if (isBasicSelected) {
                        for (const place of deliveryRestrictions.funeral_advanced_only) {
                            if (addr.includes(place)) {
                                restriction = 'funeral_advanced_only';
                                products = [
                                    alternativeProducts.funeral_advanced,
                                    alternativeProducts.funeral_premium
                                ];
                                break;
                            }
                        }
                    }
                }
            }

            // 제한이 있으면 표시
            if (restriction) {
                currentDeliveryRestriction = restriction;
                noticeTitleEl.textContent = noticeText;

                if (products.length > 0) {
                    renderAlternativeProducts(products);
                } else {
                    productsEl.innerHTML = '';
                }
                noticeEl.classList.add('show');
            } else {
                noticeEl.classList.remove('show');
                currentDeliveryRestriction = null;
            }
        }

        // =====================================================
        // 대체 상품 카드 렌더링
        // =====================================================
        function renderAlternativeProducts(products) {
            const container = document.getElementById('alternativeProducts');
            container.innerHTML = products.map((product, index) => `
                <div class="alt-product-card">
                    <img src="${product.url}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
                    <div class="alt-product-name">${product.name}</div>
                    <div class="alt-product-price">${product.price}</div>
                    <button class="btn-change-product" onclick="selectAlternativeProduct(${index})">변경하기</button>
                </div>
            `).join('');
        }

        // =====================================================
        // 대체 상품 선택
        // =====================================================
        function selectAlternativeProduct(index) {
            const restriction = currentDeliveryRestriction;
            if (!restriction) return;

            let products = [];
            let productKey = '';
            let grade = '';

            // 제한 유형에 따라 상품 정보 설정
            switch (restriction) {
                case 'congrats_kimhae':
                    products = [alternativeProducts.congrats_kimhae_objet, alternativeProducts.congrats_kimhae_objet_2];
                    productKey = 'congrats';
                    grade = index === 0 ? '[김해] 신화환' : '[김해] 신화환 고급형';
                    break;
                case 'congrats_rice':
                    products = [alternativeProducts.congrats_rice];
                    productKey = 'congrats';
                    grade = '쌀화환';
                    break;
                case 'congrats_rice_ribbon':
                    products = [alternativeProducts.congrats_rice_ribbon];
                    productKey = 'congrats';
                    grade = '쌀리본';
                    break;
                case 'congrats_basket':
                    products = [alternativeProducts.congrats_basket];
                    productKey = 'flowers';
                    grade = '기본';
                    break;
                case 'funeral_objet':
                    products = [alternativeProducts.funeral_objet, alternativeProducts.funeral_objet_2];
                    productKey = 'funeral';
                    grade = index === 0 ? '신화환' : '신화환 고급형';
                    break;
                case 'funeral_rice':
                    products = [alternativeProducts.funeral_rice];
                    productKey = 'funeral';
                    grade = '쌀화환';
                    break;
                case 'funeral_basket':
                    products = [alternativeProducts.funeral_basket, alternativeProducts.funeral_basket_2, alternativeProducts.funeral_basket_3];
                    productKey = 'funeral';
                    grade = index === 0 ? '근조바구니' : (index === 1 ? '근조바구니 고급형' : '근조바구니 최고급형');
                    break;
                case 'funeral_advanced_only':
                    products = [alternativeProducts.funeral_advanced, alternativeProducts.funeral_premium];
                    productKey = 'funeral';
                    grade = index === 0 ? '고급' : '최고급';
                    // 기존 상품 선택 방식 사용
                    selectProduct('funeral', grade);
                    // 버튼 상태 업데이트
                    document.querySelectorAll('.btn-change-product').forEach((btn, i) => {
                        btn.classList.toggle('selected', i === index);
                        btn.textContent = i === index ? '선택됨' : '변경하기';
                    });
                    showToast(`${grade} 상품이 선택되었습니다`);
                    return;
            }

            // 선택된 상품 정보 저장
            const selectedProduct = products[index];
            selectedProductKey = `${productKey}_${grade}`;
            currentCategory = productKey;
            currentGradeInModal = grade;

            // hidden 필드 업데이트
            document.getElementById('selectedCategory').value = productKey;
            document.getElementById('selectedGrade').value = grade;
            document.getElementById('selectedProductKey').value = selectedProductKey;

            // 버튼 상태 업데이트
            document.querySelectorAll('.btn-change-product').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
                btn.textContent = i === index ? '선택됨' : '변경하기';
            });

            // 주문서 미리보기 업데이트
            updateOrderPreview();

            showToast(`${selectedProduct.name} 상품이 선택되었습니다`);
        }

        // 슬라이더 상태 저장 (상품분류별 현재 위치)
        const sliderPositions = {};

        // =====================================================
        // 메인 카테고리 전환 함수
        // =====================================================
        function switchMainCategory(mainCategory) {
            currentMainCategory = mainCategory;

            // 탭 버튼 활성화 상태 업데이트
            document.querySelectorAll('.main-category-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.mainCategory === mainCategory) {
                    btn.classList.add('active');
                }
            });

            // 상품 그리드 렌더링
            renderProductGrid(mainCategory);

            // 선택 초기화
            selectedProductKey = '';
            document.getElementById('selectedCategory').value = '';
            document.getElementById('selectedGrade').value = '';
            document.getElementById('selectedProductKey').value = '';

            // 주문서 미리보기 업데이트
            updateOrderPreview();

            // 배송 제한 재체크 (카테고리 변경 시)
            const deliveryPlace = document.getElementById('orderDeliveryPlace');
            if (deliveryPlace && deliveryPlace.value) {
                checkDeliveryRestriction(deliveryPlace.value);
            } else {
                // 화환이 아닌 카테고리로 전환 시 안내 숨기기
                const noticeEl = document.getElementById('deliveryRestrictionNotice');
                if (noticeEl) {
                    noticeEl.classList.remove('show');
                    currentDeliveryRestriction = null;
                }
            }
        }

        // =====================================================
        // 상품 그리드 렌더링 함수 (상품분류별 그룹)
        // =====================================================
        function renderProductGrid(mainCategory) {
            const products = categoryMapping[mainCategory];
            const container = document.getElementById('productGridContainer');

            let html = '';
            products.forEach((productKey, index) => {
                const product = productData[productKey];
                const itemCount = product.images.length;
                const needsNav = itemCount > 3; // 3개 초과시 좌우 버튼 표시

                // 슬라이더 위치 초기화
                if (!sliderPositions[productKey]) {
                    sliderPositions[productKey] = 0;
                }

                html += `
                    <div class="product-group" data-product-key="${productKey}">
                        <div class="product-group-header">
                            <span class="product-group-title">${product.name}</span>
                        </div>
                        <div class="product-group-description">${product.description}</div>
                        <div class="product-slider-container">
                            <div class="product-slider-wrapper">
                                <div class="product-slider" id="slider-${productKey}">
                                ${product.images.map(img => {
                                    const key = `${productKey}_${img.grade}`;
                                    const isSelected = selectedProductKey === key;
                                    return `
                                        <div class="product-card ${isSelected ? 'selected' : ''}"
                                             data-key="${key}"
                                             data-category="${productKey}"
                                             data-grade="${img.grade}"
                                             data-img-url="${img.url}"
                                             onclick="selectProduct('${productKey}', '${img.grade}')">
                                            <img src="${img.url}" alt="${product.name} ${img.grade}" onclick="event.stopPropagation(); openImageModal('${img.url}', '${product.name}', '${img.grade}', '${productKey}')">
                                            <div class="product-info">
                                                <div class="product-grade">${img.grade}</div>
                                                <div class="product-price">${img.price}</div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                                </div>
                            </div>
                            ${needsNav ? `
                                <div class="product-nav-buttons">
                                    <button type="button" class="product-nav-btn" onclick="slideProducts('${productKey}', -1)" data-nav="${productKey}-prev">&lt;</button>
                                    <div class="product-nav-dots" data-dots="${productKey}">
                                        ${Array.from({length: itemCount - 2}, (_, i) => `<div class="product-nav-dot ${i === 0 ? 'active' : ''}" data-dot-index="${i}"></div>`).join('')}
                                    </div>
                                    <button type="button" class="product-nav-btn" onclick="slideProducts('${productKey}', 1)" data-nav="${productKey}-next">&gt;</button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;

                // 마지막 그룹이 아니면 구분선 추가
                if (index < products.length - 1) {
                    html += '<div class="product-group-divider"></div>';
                }
            });

            container.innerHTML = html;

            // 슬라이더 초기 상태 및 버튼 상태 업데이트
            products.forEach(productKey => {
                updateSliderButtons(productKey);
            });
        }

        // =====================================================
        // 슬라이더 이동 함수
        // =====================================================
        function slideProducts(productKey, direction) {
            const slider = document.getElementById(`slider-${productKey}`);
            const product = productData[productKey];
            const itemCount = product.images.length;
            const maxPosition = Math.max(0, itemCount - 3); // 최대 이동 가능 위치

            // 현재 위치 업데이트
            sliderPositions[productKey] = Math.max(0, Math.min(maxPosition, sliderPositions[productKey] + direction));

            // 슬라이더 이동 (카드 너비 + gap 기준)
            const cardWidth = slider.querySelector('.product-card').offsetWidth + 10; // 10px gap
            slider.style.transform = `translateX(-${sliderPositions[productKey] * cardWidth}px)`;

            // 버튼 상태 업데이트
            updateSliderButtons(productKey);
        }

        // =====================================================
        // 슬라이더 버튼 상태 업데이트
        // =====================================================
        function updateSliderButtons(productKey) {
            const product = productData[productKey];
            const itemCount = product.images.length;
            const maxPosition = Math.max(0, itemCount - 3);
            const currentPos = sliderPositions[productKey] || 0;

            const prevBtn = document.querySelector(`[data-nav="${productKey}-prev"]`);
            const nextBtn = document.querySelector(`[data-nav="${productKey}-next"]`);

            if (prevBtn) {
                prevBtn.disabled = currentPos <= 0;
            }
            if (nextBtn) {
                nextBtn.disabled = currentPos >= maxPosition;
            }

            // dot 인디케이터 업데이트
            const dotsContainer = document.querySelector(`[data-dots="${productKey}"]`);
            if (dotsContainer) {
                const dots = dotsContainer.querySelectorAll('.product-nav-dot');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentPos);
                });
            }
        }

        // =====================================================
        // 슬라이더 스와이프 제스처 (모바일)
        // =====================================================
        let touchStartX = 0;
        let touchStartY = 0;
        let currentSwipeSlider = null;

        document.addEventListener('touchstart', function(e) {
            const slider = e.target.closest('.product-slider-wrapper');
            if (slider) {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                currentSwipeSlider = slider.closest('.product-group');
            }
        }, { passive: true });

        document.addEventListener('touchend', function(e) {
            if (!currentSwipeSlider) return;

            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;

            // 수평 스와이프가 수직보다 클 때만 처리 (스크롤과 구분)
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                const productKey = currentSwipeSlider.dataset.productKey;
                if (productKey) {
                    const direction = diffX > 0 ? 1 : -1; // 왼쪽 스와이프 = 다음, 오른쪽 = 이전
                    slideProducts(productKey, direction);
                }
            }

            currentSwipeSlider = null;
        }, { passive: true });

        // =====================================================
        // 상품 선택 함수
        // =====================================================
        function selectProduct(productKey, grade) {
            const key = `${productKey}_${grade}`;
            selectedProductKey = key;

            // 선택 상태 업데이트
            document.querySelectorAll('.product-card').forEach(card => {
                card.classList.remove('selected');
                if (card.dataset.key === key) {
                    card.classList.add('selected');
                }
            });

            // hidden 필드 업데이트
            document.getElementById('selectedCategory').value = productKey;
            document.getElementById('selectedGrade').value = grade;
            document.getElementById('selectedProductKey').value = key;

            // 현재 카테고리/등급 업데이트 (호환성)
            currentCategory = productKey;
            currentGradeInModal = grade;

            // 주문서 미리보기 업데이트
            updateOrderPreview();

            // 배송 제한 재체크 (상품 변경 시)
            const deliveryPlace = document.getElementById('orderDeliveryPlace');
            if (deliveryPlace && deliveryPlace.value) {
                checkDeliveryRestriction(deliveryPlace.value);
            }
        }

        // 페이지 로드 시 저장된 보내는 분 문구 불러오기
        document.addEventListener('DOMContentLoaded', function() {
            const savedSender = localStorage.getItem('senderText');
            if (savedSender) {
                document.getElementById('senderInput').value = savedSender;
            }

            // 주문서 폼 필드 변경 시 미리보기 업데이트
            const orderFields = [
                'orderProductDetail', 'orderCustomerName', 'orderCustomerPhone',
                'orderRecipientName', 'orderRecipientPhone', 'orderDeliveryPlace',
                'orderDeliveryTime', 'orderCondolence', 'orderRibbonText', 'orderRequest'
            ];

            orderFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', updateOrderPreview);
                }
            });

            // 배달장소 입력 시 배송 제한 체크
            const deliveryPlaceField = document.getElementById('orderDeliveryPlace');
            if (deliveryPlaceField) {
                deliveryPlaceField.addEventListener('input', function() {
                    checkDeliveryRestriction(this.value);
                });
            }

            // 초기 상품 그리드 렌더링 (화환 카테고리)
            renderProductGrid('wreath');

            // 초기 주문서 미리보기 업데이트
            updateOrderPreview();
        });

        // 화면 크기 변경 시 미리보기 업데이트
        window.addEventListener('resize', function() {
            updatePreview();
        });

        // 메인 탭 전환 기능
        function showMainTab(tabId) {
            // 모든 메인 탭 콘텐츠 숨기기
            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // 모든 메인 탭 버튼 비활성화
            document.querySelectorAll('.main-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // 선택한 탭 콘텐츠 표시
            document.getElementById(tabId + 'Tab').classList.add('active');

            // 선택한 탭 버튼 활성화
            document.querySelector(`.main-tab-btn.${tabId}`).classList.add('active');
        }

        // 보내는 분 문구 저장 및 주문서 연동
        function saveSender() {
            const senderInput = document.getElementById('senderInput');
            localStorage.setItem('senderText', senderInput.value);
            // 주문서 리본문구 보내는분에 연동
            document.getElementById('orderRibbonText').value = senderInput.value;
            updateOrderPreview();
        }

        // 보내는 분 문구 가져오기
        function getSenderText() {
            return document.getElementById('senderInput').value.trim();
        }

        // 접기/펼치기 토글
        function togglePreview() {
            const content = document.getElementById('previewContent');
            const hint = document.getElementById('previewHint');

            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                hint.textContent = '탭하여 닫기';
            } else {
                content.classList.add('collapsed');
                hint.textContent = '탭하여 열기';
            }
        }

        // 미리보기 업데이트
        function updatePreview() {
            const senderText = document.getElementById('senderInput').value.trim();
            const ribbonText = document.getElementById('previewInput').value.trim();
            const display = document.getElementById('previewDisplay');

            // 주문서 경조사어에 연동
            document.getElementById('orderCondolence').value = ribbonText;
            updateOrderPreview();

            if (!senderText && !ribbonText) {
                display.innerHTML = '<p class="preview-empty">보내는 분과 리본문구를 입력하면<br>미리보기가 표시됩니다</p>';
                return;
            }

            // 보내는 분 → 좌측, 리본문구 → 우측
            const leftText = senderText;
            const rightText = ribbonText;

            // 반응형으로 컨테이너 높이 계산
            function getContainerHeight() {
                const isPC = window.innerWidth >= 768;
                return isPC ? 324 : 256;
            }

            function calcFontSize(textLen) {
                if (textLen === 0) return 14;
                const containerHeight = getContainerHeight();
                let size = Math.floor(containerHeight / (textLen*1.2));
                size = Math.min(size, 18);
                size = Math.max(size, 11);
                return size;
            }

            function createColumn(text, className) {
                if (!text) return '';
                const spaceCount = (text.match(/ /g) || []).length;
                const effectiveLen = text.length - (spaceCount * 0.5);
                const fontSize = calcFontSize(effectiveLen);
                const chars = text.split('').map(char => {
                    if (char === ' ') {
                        return `<span class="char space"></span>`;
                    }
                    return `<span class="char">${char}</span>`;
                }).join('');
                return `<div class="preview-card">
                    <div class="preview-column ${className}" style="font-size: ${fontSize}px;">
                        ${chars}
                    </div>
                </div>`;
            }

            let html = '';
            if (leftText) {
                html += createColumn(leftText, 'left');
            }
            if (rightText) {
                html += createColumn(rightText, 'right');
            }

            display.innerHTML = html;
        }

        // 서브 탭 전환 기능
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab-btn.${tabId}`).classList.add('active');
        }

        // 미리보기에 문구 설정
        function setPreviewText(text) {
            const previewInput = document.getElementById('previewInput');
            const previewContent = document.getElementById('previewContent');

            previewInput.value = text;

            if (previewContent.classList.contains('collapsed')) {
                previewContent.classList.remove('collapsed');
                document.getElementById('previewHint').textContent = '탭하여 닫기';
            }

            updatePreview();

            // 주문서에 경조사어 자동 입력
            document.getElementById('orderCondolence').value = text;

            // 보내는 분 문구가 있으면 리본문구에도 자동 입력
            const senderText = getSenderText();
            if (senderText) {
                document.getElementById('orderRibbonText').value = senderText;
            }

            updateOrderPreview();

            showToast('미리보기에 문구가 설정되었습니다');
        }

        // 텍스트 복사 기능
        function copyText(button, text) {
            const sender = getSenderText();
            const finalText = sender ? `${sender} / ${text}` : text;

            navigator.clipboard.writeText(finalText).then(() => {
                button.classList.add('copied');
                button.innerHTML = '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>';
                showToast(sender ? '보내는 분 + 문구가 복사되었습니다' : '문구가 복사되었습니다');

                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                }, 1500);
            }).catch(err => {
                const textArea = document.createElement('textarea');
                textArea.value = finalText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                button.classList.add('copied');
                button.innerHTML = '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>';
                showToast(sender ? '보내는 분 + 문구가 복사되었습니다' : '문구가 복사되었습니다');

                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                }, 1500);
            });
        }

        // 토스트 표시 기능
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message || '문구가 복사되었습니다';
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // 주문서 미리보기 업데이트
        function updateOrderPreview() {
            const selectedCategory = document.getElementById('selectedCategory').value;
            const selectedGrade = document.getElementById('selectedGrade').value;
            const productDetail = document.getElementById('orderProductDetail').value.trim();
            const customerName = document.getElementById('orderCustomerName').value.trim();
            const customerPhone = document.getElementById('orderCustomerPhone').value.trim();
            const recipientName = document.getElementById('orderRecipientName').value.trim();
            const recipientPhone = document.getElementById('orderRecipientPhone').value.trim();
            const deliveryPlace = document.getElementById('orderDeliveryPlace').value.trim();
            const deliveryTime = document.getElementById('orderDeliveryTime').value.trim();
            const condolence = document.getElementById('orderCondolence').value.trim();
            const ribbonText = document.getElementById('orderRibbonText').value.trim();
            const request = document.getElementById('orderRequest').value.trim();

            // 상품명 생성: {카테고리명} {등급} - {상세상품명}
            let productName = '(미선택)';
            if (selectedCategory && productData[selectedCategory]) {
                const categoryName = productData[selectedCategory].name;
                productName = `${categoryName} ${selectedGrade}`;
                if (productDetail) {
                    productName += ` - ${productDetail}`;
                }
            } else if (productDetail) {
                // 상품 미선택이지만 종류/색상 기입시
                productName = productDetail;
            }

            let orderText = `
【 베스트플라워 주문서 】

1. 상품명: ${productName}
2. 주문자명: ${customerName || '(미입력)'}
3. 주문자 연락처: ${customerPhone || '(미입력)'}
4. 받는분: ${recipientName || '(미입력)'}`;

            if (recipientPhone) {
                orderText += `
5. 받는분 연락처: ${recipientPhone}`;
            } else {
                orderText += `
5. 받는분 연락처: (생략)`;
            }

            orderText += `
6. 배달장소: ${deliveryPlace || '(미입력)'}
7. 배달일시: ${deliveryTime || '즉시'}`;

            if (ribbonText) {
                orderText += `
8. 보내는분: ${ribbonText}`;
            }

            if (condolence) {
                orderText += `
9. 경조사어: ${condolence}`;
            }

            if (request) {
                orderText += `
10. 요청사항: ${request}`;
            }

            orderText += `

`;

            document.getElementById('orderPreview').textContent = orderText;
        }

        // 주문서 복사
        function copyOrderForm() {
            const orderText = document.getElementById('orderPreview').textContent;

            navigator.clipboard.writeText(orderText).then(() => {
                showToast('주문서가 클립보드에 복사되었습니다');
            }).catch(err => {
                const textArea = document.createElement('textarea');
                textArea.value = orderText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('주문서가 클립보드에 복사되었습니다');
            });
        }

        // 카카오톡 채팅 열기
        function openKakaoChat() {
            copyOrderForm();

            setTimeout(() => {
                window.open('http://pf.kakao.com/_MGnWn/chat', '_blank');
            }, 500);
        }

        // 이미지 확대 보기
        let currentZoomedGrade = '';
        let currentZoomedProductKey = '';

        function openImageModal(imageUrl, productName, grade, productKey) {
            currentZoomedGrade = grade;
            currentZoomedProductKey = productKey || '';
            document.getElementById('zoomedImage').src = imageUrl;

            // 상품 개별 설명 표시 (이미지 하단)
            const descEl = document.getElementById('imageZoomDescription');
            if (productKey && productData[productKey]) {
                const product = productData[productKey];
                const imageData = product.images.find(img => img.grade === grade);
                if (imageData && imageData.desc) {
                    descEl.textContent = imageData.desc;
                    descEl.style.display = 'block';
                } else {
                    descEl.style.display = 'none';
                }
            } else {
                descEl.style.display = 'none';
            }

            document.getElementById('imageZoomOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 이미지 확대 닫기
        function closeImageZoom() {
            document.getElementById('imageZoomOverlay').classList.remove('active');
            document.body.style.overflow = ''; // 스크롤 복구
            currentZoomedGrade = '';
        }

        // 확대 오버레이 배경 클릭 처리
        function handleZoomOverlayClick(event) {
            // 이미지나 버튼 클릭이 아닌 배경 클릭시에만 닫기
            if (event.target === document.getElementById('imageZoomOverlay')) {
                closeImageZoom();
            }
        }

        // 확대 화면에서 선택하기
        function selectFromZoom(event) {
            event.stopPropagation();
            if (currentZoomedProductKey && currentZoomedGrade) {
                selectProduct(currentZoomedProductKey, currentZoomedGrade);
                closeImageZoom();
            }
        }

        // ESC 키로 이미지 확대 닫기
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageZoom();
            }
        });

        // =====================================================
        // 배송사진 캐러셀 (무한 스크롤 애니메이션)
        // =====================================================

// 배송사진 데이터 (수동 업데이트)
// 마지막 업데이트: 2026-01-19 09:30
const deliveryUpdateDate = '2026/01/19 업데이트';
const deliveryPhotos = [
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgjAQheF36d5OO5hcIsPDkILDRSAl0zZdGN9d0YWr8-dsPk9Iz0gVqSybaiM1jtSc0kFcMMs-5ciiJUTe_fqpIehVoOeYxi0UFpC964OXO_gxsRzLkLIwoEEHxn7XWOusu96wbmp0F6sfx3Q6FkkJjyws3RxiOj80pEop-g_8RNW-3jxuNtQ.&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/919',
        name: '고객'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgyAQheF3YV-GwUri-DAG7XipGsxcMGFh-u6t7aKr8-dsPk-WzkgVqSybaiM1jtSc0kFcMMs-5ciiJUTe_fqpIehVoOeYxi0UFpC964OXB_gxsRzLkLIwWGMdGPyuQXTo7g4bW9X1DfXzmC4HLSnhkYWlm0NM12cNqVKK_gM_UbWvNzoHNso.&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/918',
        name: '이수*(신부) 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgyAQheF3YV8G8NIwPoxBO16qBDNAWJi-e2u76Or8OZvPocEzYoVcIvMuuoi2RbGkdCDA6ucciSWHSN5tnxqD3BgGimnaQyEG9v0QHD_ATYn4WMeUmcAo04LS31VaN_pe15W1tjE3LZ_HfDnaoGCaiIn7JcR0fUahKKXIP_ATRfd6AzxoNtQ.&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/917',
        name: '한송* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgjAQheF36d7OtBKkw8OQgsNFaEqmJV0Y313Rhavz52w-T5aeia6kDtlUm8jVpOacdwJYwnQkFi0xcfDrp4aoV4GeUx63WFhAQtdHL3fwY2bZlyEfwmDR1oDmu2iwMU3lEG3lbhejH_t0OsaSEh5ZWLo5pnx-FkmVUvQf-Imqfb0BOr02zQ..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/916',
        name: '김행* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFjUEOgyAQXDD_wgPYhYrV9TEG7aJGLWbBcGj699b00NtkDjOeLL0S3UidsqkuUVuRmnM-CGDZpzOxaImJd79-aYx6FRg45bDFwgKy90P08lwwHzLLsYz5FAaLtgY0YO514yrn0DVYYesQ9fGcrouxpIQDC0s_x5QvZ5FUKUX_87-f6t4f4VM2eg..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/915',
        name: '오경* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOwiAQheF3YS_DYIph-jANrdNLWqQZaFgY312rC1fnz9l8gSw9M11JHbKpNpN3pOZSdgJY4nRkFi0pcwzrp4akV4Gecxm3VFlAYtenIHcIY2HZl6EcwmCNdWDwuwbRGd_cjPcN4gX1_phOBy0p4ZGFpZtTLudnDalaq_4DP1G1rzc79TbS&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/914',
        name: '고객'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgyAQheF3YV8G0JAwPoxBO16iFjMDYdH03VvbRVfnz9l8ER0-BRtUhXfVCQaPasn5RID1mIsQa05CR9w-NSa9MQwkedpTJQY--iFFvkOcMvG5jrkwgTPOg7HfNdZ6E9rg2tCY5mb1-ZgvxzpUTBMxcb8kydfnDKpaq_4DP1F1rzc7PTbP&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/913',
        name: '고객'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzUEOgjAQheG7dG-nU5DIcBhScAoITcm0pAvj3RVduHp_3uZzZOmZqFwidcimukRtQ2rOeVwngCVMR2LREhMHt35qjHoVGDhlv8XCAhL6ITq5g_OZZV_GfAiDNbYBg981iFe0pkGsb3V7Qf3Yp9NBS0rYs7D0c0z5_KwhVUrRf-BcJ6ru9QY4GjbD&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/912',
        name: '이선* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgyAQheF3mX0ZwEvi-DAG7XipEsiAYdH03VvbRVfnz9l8jiw9E1UEpxzQXCfqWoI150iIm1_OxKIkJPZu_9QU1C44csrzEQoLih_G4OSObs4scZvyKYxW2xa1-a42prZVrZuq6Ux7M-oRl8sxlkB4ZmEZ1pDy9VlNUEpRf-BcJ0L_egM4cTbE&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/911',
        name: '노영* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzUEOgyAQheG7sC8DgzFxPIxBO6hVghkwLJrevbVddPX-vM3nCemZyZE6ZVd9pq4ltZRyEMAa5zOzaEmZo98-NSW9CYycS9hTZQGJw5i83MGHwnKsUzmFAQ22YOx3jbVoXdNg45zpblY_jvlyLJISDiwsw5JyuT40pGqt-g_8RNW_3ja4Nr0.&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/910',
        name: '김희*님 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOwiAQheF3YS_D0Abj9GEaWqeXtEgzQFgY312rC1fnz9l8niw9EzWkiuyqS3RzpJacDwJYw1xcEouWmDj47VNj1JvAwClPe6wsIKEfopc7-CmzHOuYizBYYx0Y_K5BbLFBZ2xr3PWC-njMp4OWlPDEwtIvMeXzs4ZUrVX_gZ-outcbN1Q2wA..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/909',
        name: '고객'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOwiAQheF3YS_DpdYwfZiG1unFltAMEBbGd9fqwtX5czafR4PPhBZF4V10CV2LYsn5QIA1zCURS46Jgt8-NUa5MQyU8rTHSgwc-iF6voOfMvGxjrkwgVGmBaW_q7RulLOmcTfrrhctH8d8OtqgYJqIifslpnx-RqGotco_8BNF93oDO5s20Q..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/908',
        name: '박인* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgyAQheF3YV8GMNI4PoxBO16qBDJAWJi-e2u76Or8OZvPocEzYYOi8CH6hJ1FseYcEWDzS0nEkkNcIu_2T01B7gwjpTwfoRID-2EMjh_g5kwctykXJjDKWFD6u0rrRtvWqvbeteqm5TMul6MNCqaZmHhYQ8rXZxSKWqv8Az9R9K83Obw2yQ..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/907',
        name: '김대* 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgjAQheF36d5OL9HG4WFIwSkgNCXTNl0Y313Qhavz52w-jwZfGS2KypvoMt4dirmUHQGWONVMLDllin49akxyZRgol7ClRgwc-yF5foAPhXhfxlKZwChzA6W_q7S22hp7PdK5i5bPnaYT0gYFUyAm7ueUy_kZhaK1Jv_CjxTd-wNyMzdcJw..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/906',
        name: '비전*크 님'
    },
    {
        imgSrc: 'https://www.bestflower.co.kr/IU/U=eNpFzcsOgjAQheF36d5Opyixw8OQgsNFaEqmJV0Q313Rhavz52w-T5aORBWpXVbVJHI1qSnnjVww5jDuiUVLTBz88qk-6kWg45SHNRYWkNB20csD_JBZtrnPuzBYY2sw-F2DaPFeuQqvDm8X1M9tPB20pIQHFpZ2iimfnzWkSin6D_xE1bzeOX42yA..&S=300x300',
        href: 'https://www.bestflower.co.kr/board/board_detail/code/afterpicture/number/905',
        name: '김혜* 님'
    }
];

        // 캐러셀 초기화
        function initDeliverySlider() {
            // 업데이트 날짜 표시
            const dateEl = document.getElementById('deliveryUpdateDate');
            if (dateEl && deliveryUpdateDate) {
                dateEl.textContent = deliveryUpdateDate;
            }
            renderDeliverySlider();
        }

        // 캐러셀 렌더링 (무한 스크롤을 위해 사진 복제)
        function renderDeliverySlider() {
            const slider = document.getElementById('deliverySlider');

            if (deliveryPhotos.length === 0) {
                slider.innerHTML = '<div class="delivery-loading">배송사진이 없습니다.</div>';
                return;
            }

            // 무한 스크롤을 위해 사진을 2번 반복
            const duplicatedPhotos = [...deliveryPhotos, ...deliveryPhotos];

            slider.innerHTML = duplicatedPhotos.map(photo => `
                <a class="delivery-slide" href="${photo.href}" target="_blank">
                    <div class="photo">
                        <img src="${photo.imgSrc}" alt="${photo.name}" loading="lazy" referrerpolicy="no-referrer">
                    </div>
                    <span class="name">${photo.name}</span>
                </a>
            `).join('');
        }

        // 페이지 로드 시 캐러셀 초기화
        document.addEventListener('DOMContentLoaded', initDeliverySlider);

        // 카카오맵 장소 검색 (JavaScript SDK)
        const ps = new kakao.maps.services.Places();
        let currentPage = 1;
        let currentKeyword = '';
        let totalPages = 1;
        let currentPagination = null;

        // 모달 열기
        function openPlaceSearchModal() {
            document.getElementById('placeSearchModal').classList.add('show');
            document.getElementById('placeKeyword').focus();
        }

        // 모달 닫기
        function closePlaceSearchModal() {
            document.getElementById('placeSearchModal').classList.remove('show');
            document.getElementById('placeKeyword').value = '';
            document.getElementById('placesList').innerHTML = '';
            document.getElementById('placePagination').innerHTML = '';
            document.getElementById('placeSearchStatus').textContent = '';
        }

        // 장소 검색
        function searchPlaces(page = 1) {
            const keyword = document.getElementById('placeKeyword').value.trim();

            if (!keyword) {
                showToast('검색어를 입력해주세요');
                return;
            }

            currentKeyword = keyword;
            currentPage = page;

            const listEl = document.getElementById('placesList');
            const statusEl = document.getElementById('placeSearchStatus');
            const paginationEl = document.getElementById('placePagination');

            statusEl.textContent = '검색 중...';
            listEl.innerHTML = '';
            paginationEl.innerHTML = '';

            // SDK의 keywordSearch 사용
            ps.keywordSearch(keyword, function(data, status, pagination) {
                if (status === kakao.maps.services.Status.OK) {
                    statusEl.textContent = '';
                    currentPagination = pagination;
                    displayPlaces(data);
                    displayPaginationSDK(pagination);
                } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
                    statusEl.textContent = '검색 결과가 없습니다.';
                } else {
                    console.error('장소 검색 오류:', status);
                    statusEl.textContent = '검색 중 오류가 발생했습니다.';
                }
            }, { page: page, size: 10 });
        }

        // 검색 결과 목록 표시
        function displayPlaces(places) {
            const listEl = document.getElementById('placesList');
            listEl.innerHTML = '';

            places.forEach(place => {
                const li = document.createElement('li');
                li.className = 'item';

                let itemStr = '<div class="info"><h5>' + place.place_name + '</h5>';

                if (place.road_address_name) {
                    itemStr += '<span>' + place.road_address_name + '</span>';
                    itemStr += '<span class="gray">' + place.address_name + '</span>';
                } else {
                    itemStr += '<span>' + place.address_name + '</span>';
                }

                if (place.phone) {
                    itemStr += '<span class="tel">' + place.phone + '</span>';
                }

                itemStr += '</div>';
                li.innerHTML = itemStr;

                // 클릭 시 장소 선택
                li.onclick = function() {
                    selectPlace(place.place_name, place.road_address_name || place.address_name);
                };

                listEl.appendChild(li);
            });
        }

        // 페이지네이션 표시 (SDK용)
        function displayPaginationSDK(pagination) {
            const paginationEl = document.getElementById('placePagination');
            paginationEl.innerHTML = '';

            const current = pagination.current;
            const total = pagination.last;

            // 최대 5개 페이지 번호 표시
            let startPage = Math.max(1, current - 2);
            let endPage = Math.min(total, startPage + 4);
            if (endPage - startPage < 4) {
                startPage = Math.max(1, endPage - 4);
            }

            for (let i = startPage; i <= endPage; i++) {
                const a = document.createElement('a');
                a.href = '#';
                a.textContent = i;

                if (i === current) {
                    a.className = 'on';
                } else {
                    a.onclick = (function(pageNum) {
                        return function(e) {
                            e.preventDefault();
                            pagination.gotoPage(pageNum);
                        };
                    })(i);
                }

                paginationEl.appendChild(a);
            }
        }

        // 장소 선택
        function selectPlace(placeName, address) {
            const fullAddress = address + ' ' + placeName;
            document.getElementById('orderDeliveryPlace').value = fullAddress;
            closePlaceSearchModal();
            updateOrderPreview();
            checkDeliveryRestriction(fullAddress);
            showToast('배달장소가 입력되었습니다');
        }

        // 모달 외부 클릭 시 닫기
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('placeSearchModal');
            if (e.target === modal) {
                closePlaceSearchModal();
            }
        });
    </script>

    <!-- 이미지 확대 오버레이 -->
    <div class="image-zoom-overlay" id="imageZoomOverlay" onclick="handleZoomOverlayClick(event)">
        <button class="image-zoom-close" onclick="closeImageZoom()">×</button>
        <div class="image-zoom-description" id="imageZoomDescription"></div>
        <img id="zoomedImage" src="" alt="확대 이미지">
        <div class="image-zoom-hint">배경 클릭하여 닫기</div>
        <button class="image-zoom-select-btn" id="zoomSelectBtn" onclick="selectFromZoom(event)">선택하기</button>
    </div>

    <!-- 카톡 문의 플로팅 버튼 -->
    <a href="https://pf.kakao.com/_MGnWn/chat" target="_blank" class="kakao-float-btn">
        <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
        <span>문의</span>
    </a>

</body>
</html>
