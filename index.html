<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>화환 문구 모음</title>
    <style>
        @font-face {
            font-family: 'JoseonPalace';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.0/ChosunGs.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #f5f5f5;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header .logo {
            max-width: 200px;
            height: auto;
            margin-bottom: 16px;
        }

        .header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            color: #666;
        }

        /* 푸터 스타일 */
        .footer {
            margin-top: 30px;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .footer p {
            font-size: 12px;
            color: #888;
            line-height: 1.6;
        }

        .footer .copyright {
            font-weight: 500;
            color: #666;
            margin-bottom: 6px;
        }

        /* 메인 탭 스타일 */
        .main-tabs {
            display: flex;
            background: #fff;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .main-tab-btn {
            flex: 1;
            padding: 16px 10px;
            border: none;
            background: transparent;
            font-size: 17px;
            font-weight: 700;
            color: #666;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .main-tab-btn:hover {
            background: #f0f0f0;
        }

        .main-tab-btn.active {
            background: #333;
            color: #fff;
        }

        .main-tab-btn.phrases.active {
            background: #0b5c55;
        }

        .main-tab-btn.order.active {
            background: #fae100;
            color: #3c1e1e;
        }

        .main-tab-btn svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
            fill: none;
            stroke: currentColor;
        }

        .main-tab-btn.order svg {
            fill: currentColor;
            stroke: none;
        }

        .main-tab-content {
            display: none;
        }

        .main-tab-content.active {
            display: block;
        }

        /* 서브 탭 스타일 */
        .tabs {
            display: flex;
            background: #fff;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 14px 10px;
            border: none;
            background: transparent;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #f0f0f0;
        }

        .tab-btn.active {
            background: #333;
            color: #fff;
        }

        .tab-btn.funeral.active {
            background: #4a4a4a;
        }

        .tab-btn.wedding.active {
            background: #e91e63;
        }

        .tab-btn.promotion.active {
            background: #2196f3;
        }

        .tab-btn.opening.active {
            background: #ffa500;
        }

        /* 탭 콘텐츠 */
        .tab-content {
            display: none;
            width: 100%;
            max-width: 100%;
        }

        .tab-content.active {
            display: block;
        }

        /* 메시지 카드 */
        .message-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .message-card {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .message-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .message-number {
            width: 32px;
            height: 32px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: #555;
            flex-shrink: 0;
        }

        .funeral .message-number {
            background: #e8e8e8;
            color: #4a4a4a;
        }

        .wedding .message-number {
            background: #fce4ec;
            color: #e91e63;
        }

        .promotion .message-number {
            background: #e3f2fd;
            color: #2196f3;
        }

        .opening .message-number {
            background: #fff3e0;
            color: #ff9800;
        }

        .message-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.5;
            color: #333;
        }

        .copy-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: #f5f5f5;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .copy-btn:hover {
            background: #e0e0e0;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .copy-btn.copied {
            background: #4caf50;
        }

        .copy-btn.copied svg {
            stroke: #fff;
        }

        .copy-btn svg {
            width: 20px;
            height: 20px;
            stroke: #666;
            stroke-width: 2;
            fill: none;
        }

        /* 미리보기 버튼 */
        .preview-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: #e3f2fd;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .preview-btn:hover {
            background: #bbdefb;
        }

        .preview-btn:active {
            transform: scale(0.95);
        }

        .preview-btn svg {
            width: 20px;
            height: 20px;
            stroke: #1976d2;
            stroke-width: 2;
            fill: none;
        }

        /* 복사 완료 토스트 */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: #333;
            color: #fff;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10001;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            pointer-events: none;
            text-align: center;
            word-break: keep-all;
            max-width: 280px;
        }

        .toast.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        /* 모바일 반응형 */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 20px;
            }

            .main-tab-btn {
                padding: 14px 8px;
                font-size: 15px;
            }

            .tab-btn {
                padding: 10px 4px;
                font-size: 12px;
            }

            .message-card {
                padding: 14px;
            }

            .message-text {
                font-size: 14px;
            }

            .message-number {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .copy-btn {
                width: 40px;
                height: 40px;
            }
        }

        /* 카테고리 라벨 */
        .category-label {
            font-size: 13px;
            color: #888;
            margin-bottom: 12px;
            padding-left: 4px;
        }

        /* 보내는 분 문구 섹션 */
        .sender-section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .sender-section .sender-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-top: 10px;
            margin-bottom: 10px;
            display: block;
        }

        .sender-section .sender-text {
            font-size: 14px;
            color: #333;
            margin-top: 12px;
            margin-bottom: 10px;
            display: block;
        }

        .sender-section .sender-input {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .sender-section .sender-input:focus {
            outline: none;
            border-color: #333;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
        }

        .sender-section .sender-input::placeholder {
            color: #aaa;
        }

        /* 미리보기 섹션 */
        .preview-section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .preview-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }

        .preview-header:hover {
            opacity: 0.8;
        }

        .preview-section .preview-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            display: block;
        }

        .preview-hint {
            font-size: 12px;
            color: #999;
        }

        .preview-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            max-height: 500px;
            opacity: 1;
        }

        .preview-content.collapsed {
            max-height: 0;
            opacity: 0;
            margin-bottom: 0;
        }

        /* 세로쓰기 미리보기 */
        .preview-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
            border-radius: 8px;
            min-height: 350px;
        }

        .preview-card {
            background: #fff;
            border-radius: 4px;
            padding: 15px 10px;
            height: 300px;
            width: 45px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .preview-column {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-family: 'JoseonPalace', 'Gungsuh', '궁서체', '궁서', serif;
            font-weight: 600;
            color: #333;
            height: 100%;
            width: 100%;
        }

        .preview-column .char {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            width: 100%;
        }

        .preview-column .char.space {
            flex: 0.5;
        }

        .preview-column.left {
            color: #444;
        }

        .preview-column.right {
            color: #222;
        }

        .preview-empty {
            color: #aaa;
            font-size: 14px;
            text-align: center;
            padding: 40px 0;
        }

        /* PC 레이아웃 - 미리보기 우측 배치 */
        @media (min-width: 768px) {
            .container {
                max-width: 1100px;
            }

            .main-content {
                display: flex;
                flex-direction: row-reverse;
                gap: 24px;
                align-items: flex-start;
            }

            .preview-section {
                position: sticky;
                top: 20px;
                flex-shrink: 0;
                width: 280px;
                margin-bottom: 0;
            }

            .preview-display {
                min-height: 420px;
                padding: 25px;
            }

            .preview-card {
                height: 360px;
                width: 55px;
                padding: 18px 12px;
            }

            .content-section {
                flex: 1;
                min-width: 0;
            }

            .preview-hint {
                display: none;
            }

            .preview-content.collapsed {
                max-height: 500px;
                opacity: 1;
            }
        }

        /* 모바일 - 기존 레이아웃 유지 */
        @media (max-width: 767px) {
            .preview-section .preview-input {
                padding: 10px 12px;
                font-size: 14px;
            }

            .preview-display {
                gap: 15px;
                padding: 15px;
                min-height: 320px;
            }

            .preview-card {
                height: 280px;
                width: 40px;
                padding: 12px 8px;
            }
        }

        .sender-divider {
            height: 1px;
            background: #e0e0e0;
            margin: 16px 0;
        }

        @media (max-width: 480px) {
            .sender-section {
                padding: 14px;
            }

            .sender-section .sender-input {
                padding: 10px 12px;
                font-size: 14px;
            }
        }

        /* 주문서 섹션 스타일 */
        .order-section {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .order-section h2 {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #23706a;
        }

        .order-form-group {
            margin-bottom: 14px;
        }

        .order-form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .order-form-group label .required {
            color: #e91e63;
            margin-left: 2px;
        }

        .order-form-group label .optional {
            color: #999;
            font-weight: 400;
            font-size: 12px;
            margin-left: 4px;
        }

        .order-form-group .description {
            font-size: 12px;
            color: #888;
            margin-bottom: 6px;
        }

        .order-notice .highlight {
            background: linear-gradient(to top, #f7f478 50%, transparent 50%);
            font-size: 120%;
        }

        .order-form-group input,
        .order-form-group textarea,
        .order-form-group select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .order-form-group input:focus,
        .order-form-group textarea:focus,
        .order-form-group select:focus {
            outline: none;
            border-color: #fae100;
            box-shadow: 0 0 0 3px rgba(250, 225, 0, 0.2);
        }

        .order-form-group input::placeholder,
        .order-form-group textarea::placeholder {
            color: #aaa;
        }

        .order-form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .order-form-group select {
            cursor: pointer;
            background: #fff;
        }

        /* 등급 선택 라디오 버튼 스타일 */
        .grade-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .grade-option {
            flex: 1;
            min-width: 80px;
        }

        .grade-option input[type="radio"] {
            display: none;
        }

        .grade-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            text-align: center;
        }

        .grade-option input[type="radio"]:checked + label {
            border-color: #0b5c55;
            background: #0b5c55;
            color: #ffffff;
        }

        .grade-option label:hover {
            border-color: #0b5c55;
        }

        /* 주문서 미리보기/복사 영역 */
        .order-preview {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.8;
            color: #333;
            min-height: 200px;
        }

        /* 버튼 그룹 */
        .order-buttons {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }

        .btn-copy-order {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-copy-order.secondary {
            background: #f5f5f5;
            color: #333;
        }

        .btn-copy-order.secondary:hover {
            background: #e0e0e0;
        }

        .btn-copy-order svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
            fill: none;
        }

        .btn-kakao-order {
            flex: 2;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #fae100;
            color: #3c1e1e;
        }

        .btn-kakao-order:hover {
            background: #f5d800;
        }

        .btn-kakao-order:active {
            transform: scale(0.98);
        }

        .btn-kakao-order svg {
            width: 24px;
            height: 24px;
            fill: #3c1e1e;
        }

        /* 주문 안내 문구 */
        .order-notice {
            text-align: center;
            margin-top: 16px;
            padding: 8px;
        }

        .order-notice p {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin: 0;
            line-height: 1.6;
        }

        .order-notice .time-info {
            font-size: 13px;
            color: #333;
        }

        @media (max-width: 480px) {
            .order-section {
                padding: 16px;
            }

            .order-section h2 {
                font-size: 16px;
            }

            .order-form-group input,
            .order-form-group textarea,
            .order-form-group select {
                padding: 10px 12px;
                font-size: 14px;
            }

            .grade-option label {
                padding: 10px 12px;
                font-size: 14px;
            }

            .order-buttons {
                flex-direction: column;
            }

            .btn-copy-order,
            .btn-kakao-order {
                width: 100%;
            }
        }

        /* 문구 선택 안내 */
        .go-to-phrases {
            background: #f0f0f0;
            border-radius: 8px;
            padding: 14px;
            margin-bottom: 16px;
            text-align: center;
        }

        .go-to-phrases p {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .go-to-phrases button {
            background: #0b5c55;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .go-to-phrases button:hover {
            background: #1565c0;
        }

        /* 배달장소 입력 스타일 */
        .place-input-wrapper {
            display: flex;
            gap: 8px;
        }

        .place-input-wrapper input {
            flex: 1;
        }

        .btn-place-search {
            padding: 12px 16px;
            background: #fae100;
            color: #3c1e1e;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: background 0.2s ease;
        }

        .btn-place-search:hover {
            background: #f5d800;
        }

        /* 상호검색 모달 스타일 */
        .place-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .place-modal.show {
            display: flex;
        }

        .place-modal-content {
            background: #fff;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .place-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .place-modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }

        .place-modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: #666;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .place-modal-close:hover {
            color: #333;
        }

        .place-modal-search {
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .place-modal-search form {
            display: flex;
            gap: 8px;
        }

        .place-modal-search input {
            flex: 1;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
        }

        .place-modal-search input:focus {
            outline: none;
            border-color: #fae100;
            box-shadow: 0 0 0 3px rgba(250, 225, 0, 0.2);
        }

        .place-modal-search button {
            padding: 12px 20px;
            background: #fae100;
            color: #3c1e1e;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .place-modal-search button:hover {
            background: #f5d800;
        }

        .place-search-status {
            padding: 12px 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .places-list {
            list-style: none;
            margin: 0;
            padding: 0;
            overflow-y: auto;
            flex: 1;
        }

        .places-list .item {
            padding: 14px 20px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .places-list .item:hover {
            background: #f9f9f9;
        }

        .places-list .item h5 {
            margin: 0 0 6px 0;
            font-size: 15px;
            font-weight: 600;
            color: #333;
        }

        .places-list .item .info span {
            display: block;
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .places-list .item .info .gray {
            color: #999;
            font-size: 12px;
        }

        .places-list .item .info .tel {
            color: #009900;
            margin-top: 4px;
        }

        .place-pagination {
            padding: 12px 20px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }

        .place-pagination a {
            display: inline-block;
            padding: 6px 12px;
            margin: 0 4px;
            color: #666;
            text-decoration: none;
            border-radius: 4px;
        }

        .place-pagination a:hover {
            background: #f0f0f0;
        }

        .place-pagination a.on {
            font-weight: bold;
            color: #333;
            background: #fae100;
        }

        /* 상품 카테고리 탭 스타일 */
        .product-category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .category-tab-btn {
            padding: 12px 16px;
            border: 2px solid #f9f9f9;
            background: #f9f9f9;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-tab-btn:hover {
            border-color: #0b5c55;
        }

        .category-tab-btn.active {
            border-color: #0b5c55;
            background: #0b5c55;
            color: #fff;
        }

        .category-tab-btn .recommend-badge {
            font-size: 10px;
            color: #e91e63;
            display: block;
            margin-top: 2px;
            pointer-events: none;
        }

        .category-tab-btn.active .recommend-badge {
            color: #fce4ec;
        }

        /* 상품 이미지 모달 스타일 */
        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1001;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .product-modal.show {
            display: flex;
        }

        .product-modal-content {
            background: #fff;
            border-radius: 16px;
            width: 100%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 24px;
        }

        .product-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .product-modal-header h3 {
            margin: 0;
            font-size: 20px;
            font-weight: 700;
            color: #333;
        }

        .product-modal-close {
            background: none;
            border: none;
            font-size: 32px;
            color: #666;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .product-modal-close:hover {
            color: #333;
        }

        /* 상품 이미지 그리드 */
        .product-images-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .product-image-item {
            cursor: pointer;
            border: 3px solid transparent;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .product-image-item:hover {
            border-color: #0b5c55;
        }

        .product-image-item.selected {
            border-color: #0b5c55;
            box-shadow: 0 4px 12px rgba(11, 92, 85, 0.3);
        }

        .product-image-item img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            display: block;
        }

        .product-image-item img:hover {
            opacity: 0.9;
        }

        .product-image-item .grade-label {
            text-align: center;
            padding: 12px 4px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            background: #f5f5f5;
            cursor: pointer;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 44px;
        }

        .product-image-item.selected .grade-label {
            background: #0b5c55;
            color: #fff;
        }

        /* 상품 설명 영역 */
        .product-description {
            background: #fff;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            text-align: left;
        }

        .product-description .tip-box {
            margin-top: 10px;
            font-size: 13px;
            color: #666
        }

        .product-modal-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-modal-cancel {
            flex: 1;
            padding: 14px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
        }

        .btn-modal-cancel:hover {
            background: #f5f5f5;
        }

        .btn-modal-confirm {
            flex: 2;
            padding: 14px;
            border: none;
            background: #0b5c55;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
        }

        .btn-modal-confirm:hover {
            background: #094a44;
        }

        @media (max-width: 480px) {
            .product-category-tabs {
                gap: 6px;
            }

            .category-tab-btn {
                padding: 10px 12px;
                font-size: 12px;
                min-height: 44px;
            }

            .product-modal-content {
                padding: 16px;
            }

            .product-images-grid {
                gap: 8px;
            }

            .product-image-item .grade-label {
                font-size: 13px;
                padding: 10px 4px;
                min-height: 48px;
            }
        }

        /* 이미지 확대 오버레이 */
        .image-zoom-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
        }

        .image-zoom-overlay.active {
            display: flex;
        }

        .image-zoom-overlay img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .image-zoom-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .image-zoom-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .image-zoom-hint {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .image-zoom-select-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 14px 40px;
            background: #0b5c55;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .image-zoom-select-btn:hover {
            background: #094a44;
        }

        /* 카톡 문의 플로팅 버튼 */
        .kakao-float-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            background: #fae100;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 9999;
            text-decoration: none;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .kakao-float-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }

        .kakao-float-btn svg {
            width: 28px;
            height: 28px;
            fill: #3c1e1e;
        }

        .kakao-float-btn span {
            font-size: 9px;
            font-weight: 700;
            color: #3c1e1e;
            margin-top: 2px;
        }

        /* 미리보기 안내 말풍선 */
        .preview-tooltip {
            position: absolute;
            top: -32px;
            right: 0;
            background: #1976d2;
            color: #fff;
            font-size: 11px;
            font-weight: 600;
            padding: 6px 10px;
            white-space: nowrap;
            z-index: 10;
        }

        .preview-tooltip::after {
            content: '';
            position: absolute;
            bottom: -6px;
            right: 16px;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #1976d2;
        }

        .message-card.with-tooltip {
            position: relative;
            overflow: visible;
        }
    </style>
    <!-- 카카오맵 SDK -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2a2757bfe21447887d8528345d95588d&libraries=services"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://www.bestflower.co.kr/common/html/ds_resource/logo/L2094/images/logo_header_b.png" alt="베스트플라워" class="logo">
        </div>

        <!-- 메인 탭 버튼 -->
        <div class="main-tabs">
            <button class="main-tab-btn phrases active" onclick="showMainTab('phrases')">
                <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                리본문구
            </button>
            <button class="main-tab-btn order" onclick="showMainTab('order')">
                <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
                주문하기
            </button>
        </div>

        <!-- 리본문구 보기 탭 콘텐츠 -->
        <div id="phrasesTab" class="main-tab-content active">
            <!-- 보내는 분 문구 섹션 -->
            <div class="sender-section">
                <label class="sender-label">리본문구 보내는분</label>
                <input type="text" id="senderInput" class="sender-input" placeholder="예: 베스트플라워 대표이사 홍길동" oninput="saveSender(); updatePreview();">
                <label class="sender-label">리본문구 경조사어</label>
                <input type="text" id="previewInput" class="sender-input" placeholder="예: 謹弔" oninput="updatePreview()">
                <label class="sender-text">＊문구 복사시 보내는 분과 경조사어가 함께 복사됩니다</label>
            </div>

            <!-- PC: 미리보기 + 콘텐츠 래퍼 -->
            <div class="main-content">
                <!-- 문구 미리보기 섹션 -->
                <div class="preview-section">
                    <div class="preview-header" onclick="togglePreview()">
                        <label class="preview-label">문구 미리보기</label>
                        <span class="preview-hint" id="previewHint">탭하여 열기</span>
                    </div>
                    <div id="previewContent" class="preview-content collapsed">
                        <div id="previewDisplay" class="preview-display">
                            <p class="preview-empty">보내는 분과 리본문구를 입력하면<br>미리보기가 표시됩니다</p>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 섹션 (탭 + 목록) -->
                <div class="content-section">
                    <!-- 탭 버튼 -->
                    <div class="tabs">
                        <button class="tab-btn funeral active" onclick="showTab('funeral')">장례</button>
                        <button class="tab-btn wedding" onclick="showTab('wedding')">결혼</button>
                        <button class="tab-btn promotion" onclick="showTab('promotion')">승진/취임</button>
                        <button class="tab-btn opening" onclick="showTab('opening')">개업/이전</button>
                    </div>

                    <!-- 장례 탭 콘텐츠 -->
                    <div id="funeral" class="tab-content funeral active">
                        <p class="category-label">장례 조문 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">삼가 故人의 冥福을 빕니다 (삼가 고인의 명복을 빕니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 故人의 冥福을 빕니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 故人의 冥福을 빕니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">삼가 고인의 명복을 빕니다 (한글)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 고인의 명복을 빕니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 고인의 명복을 빕니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">謹弔 (근조)</p>
                                <button class="copy-btn" onclick="copyText(this, '謹弔')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('謹弔')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">삼가 弔意를 표합니다 (삼가 조의를 표합니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '삼가 弔意를 표합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('삼가 弔意를 표합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">追慕 (추모)</p>
                                <button class="copy-btn" onclick="copyText(this, '追慕')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('追慕')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">하나님의 위로가 함께하시길 기도합니다</p>
                                <button class="copy-btn" onclick="copyText(this, '하나님의 위로가 함께하시길 기도합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('하나님의 위로가 함께하시길 기도합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">7</span>
                                <p class="message-text">召天 (소천)</p>
                                <button class="copy-btn" onclick="copyText(this, '召天')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('召天')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">8</span>
                                <p class="message-text">極樂往生發願 (극락왕생발원)</p>
                                <button class="copy-btn" onclick="copyText(this, '極樂往生發願')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('極樂往生發願')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 결혼 탭 콘텐츠 -->
                    <div id="wedding" class="tab-content wedding">
                        <p class="category-label">결혼 축하 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝結婚 (축결혼/신랑측)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝結婚')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝結婚')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝華婚 (축화혼/신부측)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝華婚')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝華婚')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">결혼을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '결혼을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('결혼을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">영원한 사랑과 행복을 기원합니다</p>
                                <button class="copy-btn" onclick="copyText(this, '영원한 사랑과 행복을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('영원한 사랑과 행복을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 승진/취임 탭 콘텐츠 -->
                    <div id="promotion" class="tab-content promotion">
                        <p class="category-label">승진 / 취임 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝昇進 (축 승진)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝昇進')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝昇進')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝榮轉 (축 영전)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝榮轉')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝榮轉')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">祝就任 (축 취임)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝就任')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝就任')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">승진을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '승진을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('승진을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">영전을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '영전을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('영전을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">취임을 축하드립니다</p>
                                <button class="copy-btn" onclick="copyText(this, '취임을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('취임을 축하드립니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 개업/이전 탭 콘텐츠 -->
                    <div id="opening" class="tab-content opening">
                        <p class="category-label">개업 / 이전 문구</p>
                        <div class="message-list">
                            <div class="message-card with-tooltip">
                                <div class="preview-tooltip">클릭하여 문구 미리보기</div>
                                <span class="message-number">1</span>
                                <p class="message-text">祝開業 (축 개업)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝開業')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝開業')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">2</span>
                                <p class="message-text">祝發展 (축 발전)</p>
                                <button class="copy-btn" onclick="copyText(this, '祝發展')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('祝發展')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">3</span>
                                <p class="message-text">無窮한 發展을 祈願합니다 (무궁한 발전을 기원합니다)</p>
                                <button class="copy-btn" onclick="copyText(this, '無窮한 發展을 祈願합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('無窮한 發展을 祈願합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">4</span>
                                <p class="message-text">무궁한 발전을 기원합니다 (한글)</p>
                                <button class="copy-btn" onclick="copyText(this, '무궁한 발전을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('무궁한 발전을 기원합니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">5</span>
                                <p class="message-text">이전을 축하드리며 사업 번창하시기 바랍니다</p>
                                <button class="copy-btn" onclick="copyText(this, '이전을 축하드리며 사업 번창하시기 바랍니다')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('이전을 축하드리며 사업 번창하시기 바랍니다')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">6</span>
                                <p class="message-text">♥들숨에 손님 날숨에 매출♥</p>
                                <button class="copy-btn" onclick="copyText(this, '♥들숨에 손님 날숨에 매출♥')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('♥들숨에 손님 날숨에 매출♥')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">7</span>
                                <p class="message-text">돈세다 힘들면 연락주세요</p>
                                <button class="copy-btn" onclick="copyText(this, '돈세다 힘들면 연락주세요')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('돈세다 힘들면 연락주세요')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                            <div class="message-card">
                                <span class="message-number">8</span>
                                <p class="message-text">오늘은 사장님 내일은 건물주</p>
                                <button class="copy-btn" onclick="copyText(this, '오늘은 사장님 내일은 건물주')">
                                    <svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                                <button class="preview-btn" onclick="setPreviewText('오늘은 사장님 내일은 건물주')">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div><!-- content-section -->
            </div><!-- main-content -->
        </div><!-- phrasesTab -->

        <!-- 주문하기 탭 콘텐츠 -->
        <div id="orderTab" class="main-tab-content">
            <!-- 문구 선택 안내 -->
            <div class="go-to-phrases">
                <p>경조사어/보내는분 문구를 선택하려면</p>
                <button onclick="showMainTab('phrases')">리본문구 보러가기</button>
            </div>

            <!-- 주문서 작성 섹션 -->
            <div class="order-section">
                <h2>주문서 작성</h2>

                <!-- 상품 카테고리 선택 -->
                <div class="order-form-group">
                    <label>상품 선택 <span class="required">*</span></label>
                    <p class="description">카테고리를 선택하면 예시 이미지를 확인할 수 있습니다</p>
                    <div class="product-category-tabs">
                        <button type="button" class="category-tab-btn" data-category="funeral" onclick="openProductModal('funeral')">근조화환</button>
                        <button type="button" class="category-tab-btn" data-category="congrats" onclick="openProductModal('congrats')">축하화환</button>
                        <button type="button" class="category-tab-btn" data-category="plant" onclick="openProductModal('plant')">
                            관엽식물
                            <span class="recommend-badge">개업&승진선물 추천</span>
                        </button>
                        <button type="button" class="category-tab-btn" data-category="orchid" onclick="openProductModal('orchid')">
                            동양란
                            <span class="recommend-badge">승진선물 추천</span>
                        </button>
                        <button type="button" class="category-tab-btn" data-category="phalaenopsis" onclick="openProductModal('phalaenopsis')">
                            서양란
                            <span class="recommend-badge">승진선물 추천</span>
                        </button>
                        <button type="button" class="category-tab-btn" data-category="flowers" onclick="openProductModal('flowers')">꽃바구니</button>
                    </div>
                    <!-- 선택된 카테고리와 등급 저장 -->
                    <input type="hidden" id="selectedCategory" value="">
                    <input type="hidden" id="selectedGrade" value="고급">
                </div>

                <!-- 상세상품명 (생략가능) -->
                <div class="order-form-group">
                    <label>종류·색상 <span class="optional">(생략시 이미지 상품 배송)</span></label>
                    <p class="description">원하시는 종류나 색상이 있으면 알려주세요</p>
                    <input type="text" id="orderProductDetail" placeholder="예: 스투키, 흰색화분">
                </div>

                <div class="order-form-group">
                    <label>주문자명 <span class="required">*</span></label>
                    <p class="description">회사명 또는 담당자 성함을 기입해주세요</p>
                    <input type="text" id="orderCustomerName" placeholder="예: 베스트플라워">
                </div>

                <div class="order-form-group">
                    <label>주문자 핸드폰번호 <span class="required">*</span></label>
                    <input type="tel" id="orderCustomerPhone" placeholder="예: 010-1234-5678">
                </div>

                <div class="order-form-group">
                    <label>받는분 <span class="required">*</span></label>
                    <input type="text" id="orderRecipientName" placeholder="예: 신랑 혼주 홍길동">
                </div>

                <div class="order-form-group">
                    <label>받는분 핸드폰번호 <span class="optional">(생략가능)</span></label>
                    <input type="tel" id="orderRecipientPhone" placeholder="예: 010-5678-1234">
                </div>

                <div class="order-form-group">
                    <label>배달장소 <span class="required">*</span></label>
                    <div class="place-input-wrapper">
                        <input type="text" id="orderDeliveryPlace" placeholder="예: 서울 강남구 삼성동 OO예식장 OO홀">
                        <button type="button" class="btn-place-search" onclick="openPlaceSearchModal()">상호검색</button>
                    </div>
                </div>

                <div class="order-form-group">
                    <label>배달시간 / 행사시간 <span class="optional">(생략시 3시간내 즉시배송)</span></label>
                    <input type="text" id="orderDeliveryTime" placeholder="예: 1월 10일 오후 2시 예식">
                </div>

                <div class="order-form-group">
                    <label>리본문구 보내는분 <span class="required">*</span></label>

                    <input type="text" id="orderRibbonText" placeholder="예: (주)베스트플라워 대표이사 홍길동">
                </div>

                <div class="order-form-group">
                    <label>리본문구 경조사어 <span class="required">*</span></label>

                    <input type="text" id="orderCondolence" placeholder="예: 謹弔">
                </div>

                <div class="order-form-group">
                    <label>요청사항</label>
                    <textarea id="orderRequest" placeholder="배송 관련 요청사항이 있으시면 입력해주세요"></textarea>
                </div>

                <div class="order-preview" id="orderPreview">주문서를 작성하시면 여기에 미리보기가 표시됩니다.</div>

                <div class="order-notice">
                    <p><span class=highlight>✔️ 카카오톡 채팅창에 붙여넣기 해주세요</span></p>
                </div>

                <div class="order-buttons">
                    <button class="btn-copy-order secondary" onclick="copyOrderForm()">
                        <svg viewBox="0 0 24 24" stroke="currentColor"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        주문서 복사
                    </button>
                    <button class="btn-kakao-order" onclick="openKakaoChat()">
                        <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
                        카톡 주문하기
                    </button>
                </div>

                <div class="order-notice" style="margin-top: 12px;">
                    <p class="time-info">카톡주문 가능시간 | 평일 09:00~18:00</p>
                    <p class="time-info">무통장입금 | 하나은행 768-910006-74504 (주)베스트플라워</p>
                </div>
            </div>
        </div><!-- orderTab -->

        <!-- 푸터 -->
        <div class="footer">
            <p class="copyright">© 2025 (주)베스트플라워. All Rights Reserved.</p>
            <p>본 페이지의 모든 콘텐츠는 저작권법의 보호를 받습니다.<br>
            무단 전재, 복제, 배포 및 상업적 이용을 금지합니다.</p>
        </div>
    </div>

    <!-- 토스트 메시지 -->
    <div id="toast" class="toast">문구가 복사되었습니다</div>

    <!-- 상호검색 모달 -->
    <div id="placeSearchModal" class="place-modal">
        <div class="place-modal-content">
            <div class="place-modal-header">
                <h3>상호검색</h3>
                <button type="button" class="place-modal-close" onclick="closePlaceSearchModal()">&times;</button>
            </div>
            <div class="place-modal-search">
                <form onsubmit="searchPlaces(); return false;">
                    <input type="text" id="placeKeyword" placeholder="장소명을 입력하세요 (예: 삼성서울병원)">
                    <button type="submit">검색</button>
                </form>
            </div>
            <div id="placeSearchStatus" class="place-search-status"></div>
            <ul id="placesList" class="places-list"></ul>
            <div id="placePagination" class="place-pagination"></div>
        </div>
    </div>

    <!-- 상품 선택 모달 -->
    <div id="productModal" class="product-modal">
        <div class="product-modal-content">
            <div class="product-modal-header">
                <h3 id="productModalTitle">상품 선택</h3>
                <button type="button" class="product-modal-close" onclick="closeProductModal()">&times;</button>
            </div>
            <div id="productImagesGrid" class="product-images-grid">
                <!-- 이미지들이 JavaScript로 동적 생성됨 -->
            </div>
            <div id="productDescription" class="product-description">
                <!-- 설명이 JavaScript로 동적 생성됨 -->
            </div>
            <div class="product-modal-buttons">
                <button type="button" class="btn-modal-cancel" onclick="closeProductModal()">취소</button>
                <button type="button" class="btn-modal-confirm" onclick="confirmProductSelection()">선택하기</button>
            </div>
        </div>
    </div>

    <script>
        // 상품 카테고리 데이터
        const productData = {
            funeral: {
                name: '근조화환',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1015_01.png&S=660x660' },
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1002_01.png&S=660x660' },
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1016_01.png&S=660x660' } // 근조4단
                ],
                description: '기본→고급→최고급 순으로 꽃의 개수와 포인트 꽃이 증가합니다.'
            },
            congrats: {
                name: '축하화환',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10510_01.png&S=660x660' },
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1013_01.png&S=500x500' },
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10526_01.png&S=660x660' } // 축하4단
                ],
                description: '기본→고급→최고급 순으로 꽃의 개수와 포인트 꽃이 증가합니다.'
            },
            plant: {
                name: '관엽식물',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/YK1016_01.png&S=660x660' }, // 스노우사파이어
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1046_01.png&S=660x660' }, // 금전수 바닥
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WE1039_01.png&S=660x660' } // 떡갈 바닥
                ],
                description: '<div class="plant-desc-basic">승진선물 추천! 책상 위에 올라가기 좋은 사이즈예요.</div><div class="plant-desc-advanced">개업화분 추천!</div><div class="plant-desc-premium">개업&사무실 이전 선물 추천! 인테리어로 적격이에요.</div>',
                gradeDescriptions: {
                    '기본': '승진선물 추천! 책상 위에 올라가기 좋은 사이즈예요.',
                    '고급': '개업화분 추천!',
                    '최고급': '개업&사무실 이전 선물 추천! 인테리어로 적격이에요.'
                },
                useGradeDesc: true,
                basicHighlight: true
            },
            orchid: {
                name: '동양란',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WF1039_01.JPG&S=660x660' },
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10308_01.jpg&S=660x660' }, // 황룡금 투각
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10325_01.jpg&S=660x660' } // 금기 금투각
                ],
                description: '기본→고급→최고급 순으로 화분과 품종이 달라집니다.',
                tip: '동양란은 잎의 노란색 무늬가 선명하고 균형있게 나타나는 품종일수록 희소성이 높습니다.'
            },
            phalaenopsis: {
                name: '서양란',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/WI1024_01.png&S=660x660' },
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10446_01.png&S=660x660' },
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/10431_01.png&S=660x660' }
                ],
                description: '기본→고급→최고급 순으로 꽃줄기의 개수가 증가합니다.'
            },
            flowers: {
                name: '꽃바구니',
                images: [
                    { grade: '기본', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0001_01.png&S=660x660' },
                    { grade: '고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0002_01.png&S=660x660' },
                    { grade: '최고급', url: 'https://www.bestflower.co.kr/IS/U=bestflower/BK0003_01.png&S=660x660' }
                ],
                description: '기본→고급→최고급 순으로 꽃의 개수와 볼륨이 증가합니다.'
            }
        };

        // 현재 선택된 상품 정보
        let currentCategory = '';
        let currentGradeInModal = '고급';

        // 페이지 로드 시 저장된 보내는 분 문구 불러오기
        document.addEventListener('DOMContentLoaded', function() {
            const savedSender = localStorage.getItem('senderText');
            if (savedSender) {
                document.getElementById('senderInput').value = savedSender;
            }

            // 주문서 폼 필드 변경 시 미리보기 업데이트
            const orderFields = [
                'orderProductDetail', 'orderCustomerName', 'orderCustomerPhone',
                'orderRecipientName', 'orderRecipientPhone', 'orderDeliveryPlace',
                'orderDeliveryTime', 'orderCondolence', 'orderRibbonText', 'orderRequest'
            ];

            orderFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', updateOrderPreview);
                }
            });

            // 초기 주문서 미리보기 업데이트
            updateOrderPreview();
        });

        // 화면 크기 변경 시 미리보기 업데이트
        window.addEventListener('resize', function() {
            updatePreview();
        });

        // 메인 탭 전환 기능
        function showMainTab(tabId) {
            // 모든 메인 탭 콘텐츠 숨기기
            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // 모든 메인 탭 버튼 비활성화
            document.querySelectorAll('.main-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // 선택한 탭 콘텐츠 표시
            document.getElementById(tabId + 'Tab').classList.add('active');

            // 선택한 탭 버튼 활성화
            document.querySelector(`.main-tab-btn.${tabId}`).classList.add('active');
        }

        // 보내는 분 문구 저장 및 주문서 연동
        function saveSender() {
            const senderInput = document.getElementById('senderInput');
            localStorage.setItem('senderText', senderInput.value);
            // 주문서 리본문구 보내는분에 연동
            document.getElementById('orderRibbonText').value = senderInput.value;
            updateOrderPreview();
        }

        // 보내는 분 문구 가져오기
        function getSenderText() {
            return document.getElementById('senderInput').value.trim();
        }

        // 접기/펼치기 토글
        function togglePreview() {
            const content = document.getElementById('previewContent');
            const hint = document.getElementById('previewHint');

            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                hint.textContent = '탭하여 닫기';
            } else {
                content.classList.add('collapsed');
                hint.textContent = '탭하여 열기';
            }
        }

        // 미리보기 업데이트
        function updatePreview() {
            const senderText = document.getElementById('senderInput').value.trim();
            const ribbonText = document.getElementById('previewInput').value.trim();
            const display = document.getElementById('previewDisplay');

            // 주문서 경조사어에 연동
            document.getElementById('orderCondolence').value = ribbonText;
            updateOrderPreview();

            if (!senderText && !ribbonText) {
                display.innerHTML = '<p class="preview-empty">보내는 분과 리본문구를 입력하면<br>미리보기가 표시됩니다</p>';
                return;
            }

            // 보내는 분 → 좌측, 리본문구 → 우측
            const leftText = senderText;
            const rightText = ribbonText;

            // 반응형으로 컨테이너 높이 계산
            function getContainerHeight() {
                const isPC = window.innerWidth >= 768;
                return isPC ? 324 : 256;
            }

            function calcFontSize(textLen) {
                if (textLen === 0) return 14;
                const containerHeight = getContainerHeight();
                let size = Math.floor(containerHeight / (textLen*1.2));
                size = Math.min(size, 18);
                size = Math.max(size, 11);
                return size;
            }

            function createColumn(text, className) {
                if (!text) return '';
                const spaceCount = (text.match(/ /g) || []).length;
                const effectiveLen = text.length - (spaceCount * 0.5);
                const fontSize = calcFontSize(effectiveLen);
                const chars = text.split('').map(char => {
                    if (char === ' ') {
                        return `<span class="char space"></span>`;
                    }
                    return `<span class="char">${char}</span>`;
                }).join('');
                return `<div class="preview-card">
                    <div class="preview-column ${className}" style="font-size: ${fontSize}px;">
                        ${chars}
                    </div>
                </div>`;
            }

            let html = '';
            if (leftText) {
                html += createColumn(leftText, 'left');
            }
            if (rightText) {
                html += createColumn(rightText, 'right');
            }

            display.innerHTML = html;
        }

        // 서브 탭 전환 기능
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab-btn.${tabId}`).classList.add('active');
        }

        // 미리보기에 문구 설정
        function setPreviewText(text) {
            const previewInput = document.getElementById('previewInput');
            const previewContent = document.getElementById('previewContent');

            previewInput.value = text;

            if (previewContent.classList.contains('collapsed')) {
                previewContent.classList.remove('collapsed');
                document.getElementById('previewHint').textContent = '탭하여 닫기';
            }

            updatePreview();

            // 주문서에 경조사어 자동 입력
            document.getElementById('orderCondolence').value = text;

            // 보내는 분 문구가 있으면 리본문구에도 자동 입력
            const senderText = getSenderText();
            if (senderText) {
                document.getElementById('orderRibbonText').value = senderText;
            }

            updateOrderPreview();

            showToast('미리보기에 문구가 설정되었습니다');
        }

        // 텍스트 복사 기능
        function copyText(button, text) {
            const sender = getSenderText();
            const finalText = sender ? `${sender} / ${text}` : text;

            navigator.clipboard.writeText(finalText).then(() => {
                button.classList.add('copied');
                button.innerHTML = '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>';
                showToast(sender ? '보내는 분 + 문구가 복사되었습니다' : '문구가 복사되었습니다');

                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                }, 1500);
            }).catch(err => {
                const textArea = document.createElement('textarea');
                textArea.value = finalText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                button.classList.add('copied');
                button.innerHTML = '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>';
                showToast(sender ? '보내는 분 + 문구가 복사되었습니다' : '문구가 복사되었습니다');

                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<svg viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                }, 1500);
            });
        }

        // 토스트 표시 기능
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message || '문구가 복사되었습니다';
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // 주문서 미리보기 업데이트
        function updateOrderPreview() {
            const selectedCategory = document.getElementById('selectedCategory').value;
            const selectedGrade = document.getElementById('selectedGrade').value;
            const productDetail = document.getElementById('orderProductDetail').value.trim();
            const customerName = document.getElementById('orderCustomerName').value.trim();
            const customerPhone = document.getElementById('orderCustomerPhone').value.trim();
            const recipientName = document.getElementById('orderRecipientName').value.trim();
            const recipientPhone = document.getElementById('orderRecipientPhone').value.trim();
            const deliveryPlace = document.getElementById('orderDeliveryPlace').value.trim();
            const deliveryTime = document.getElementById('orderDeliveryTime').value.trim();
            const condolence = document.getElementById('orderCondolence').value.trim();
            const ribbonText = document.getElementById('orderRibbonText').value.trim();
            const request = document.getElementById('orderRequest').value.trim();

            // 상품명 생성: {카테고리명} {등급} - {상세상품명}
            let productName = '(미선택)';
            if (selectedCategory && productData[selectedCategory]) {
                const categoryName = productData[selectedCategory].name;
                productName = `${categoryName} ${selectedGrade}`;
                if (productDetail) {
                    productName += ` - ${productDetail}`;
                }
            }

            let orderText = `
【 베스트플라워 주문서 】

1. 상품명: ${productName}
2. 주문자명: ${customerName || '(미입력)'}
3. 주문자 연락처: ${customerPhone || '(미입력)'}
4. 받는분: ${recipientName || '(미입력)'}`;

            if (recipientPhone) {
                orderText += `
5. 받는분 연락처: ${recipientPhone}`;
            } else {
                orderText += `
5. 받는분 연락처: (생략)`;
            }

            orderText += `
6. 배달장소: ${deliveryPlace || '(미입력)'}
7. 배달일시: ${deliveryTime || '즉시'}`;

            if (ribbonText) {
                orderText += `
8. 보내는분: ${ribbonText}`;
            }

            if (condolence) {
                orderText += `
9. 경조사어: ${condolence}`;
            }

            if (request) {
                orderText += `
10. 요청사항: ${request}`;
            }

            orderText += `

`;

            document.getElementById('orderPreview').textContent = orderText;
        }

        // 주문서 복사
        function copyOrderForm() {
            const orderText = document.getElementById('orderPreview').textContent;

            navigator.clipboard.writeText(orderText).then(() => {
                showToast('주문서가 클립보드에 복사되었습니다');
            }).catch(err => {
                const textArea = document.createElement('textarea');
                textArea.value = orderText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('주문서가 클립보드에 복사되었습니다');
            });
        }

        // 카카오톡 채팅 열기
        function openKakaoChat() {
            copyOrderForm();

            setTimeout(() => {
                window.open('http://pf.kakao.com/_MGnWn/chat', '_blank');
            }, 500);
        }

        // 상품 모달 열기
        function openProductModal(category) {
            currentCategory = category;
            const data = productData[category];

            if (!data) return;

            // 모달 타이틀 설정
            document.getElementById('productModalTitle').textContent = data.name + ' 선택';

            // 이미지 그리드 생성
            const grid = document.getElementById('productImagesGrid');
            grid.innerHTML = data.images.map((img, index) => `
                <div class="product-image-item ${img.grade === currentGradeInModal ? 'selected' : ''}"
                     data-grade="${img.grade}"
                     onclick="selectGradeInModal('${img.grade}')">
                    <img src="${img.url}" alt="${data.name} ${img.grade}" onclick="openImageZoom('${img.url}', '${img.grade}'); event.stopPropagation();">
                    <div class="grade-label">${img.grade}</div>
                </div>
            `).join('');

            // 설명 업데이트
            updateProductDescription(category, currentGradeInModal);

            // 모달 표시
            document.getElementById('productModal').classList.add('show');
        }

        // 모달 내 등급 선택
        function selectGradeInModal(grade) {
            currentGradeInModal = grade;

            // 선택 상태 업데이트
            document.querySelectorAll('.product-image-item').forEach(item => {
                if (item.dataset.grade === grade) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });

            // 설명 업데이트
            updateProductDescription(currentCategory, grade);
        }

        // 상품 설명 업데이트
        function updateProductDescription(category, grade) {
            const data = productData[category];
            const descEl = document.getElementById('productDescription');

            if (data.useGradeDesc && data.gradeDescriptions) {
                // 관엽식물처럼 등급별 설명이 다른 경우
                const desc = data.gradeDescriptions[grade] || data.description;
                const isBasic = grade === '기본' && data.basicHighlight;
                descEl.className = 'product-description' + (isBasic ? ' plant-basic' : '');
                descEl.innerHTML = desc;
            } else {
                // 일반 설명
                descEl.className = 'product-description';
                let html = data.description;

                // TIP이 있는 경우 (동양란)
                if (data.tip) {
                    html += `<div class="tip-box">💡<strong>TIP</strong> ${data.tip}</div>`;
                }

                descEl.innerHTML = html;
            }
        }

        // 상품 모달 닫기
        function closeProductModal() {
            document.getElementById('productModal').classList.remove('show');
        }

        // 이미지 확대 보기
        // 현재 확대 중인 이미지의 등급 저장
        let currentZoomedGrade = '';

        function openImageZoom(imageUrl, grade) {
            event.stopPropagation(); // 등급 선택 이벤트 방지
            currentZoomedGrade = grade;
            document.getElementById('zoomedImage').src = imageUrl;
            document.getElementById('imageZoomOverlay').classList.add('active');
            document.body.style.overflow = 'hidden'; // 스크롤 방지
        }

        // 이미지 확대 닫기
        function closeImageZoom() {
            document.getElementById('imageZoomOverlay').classList.remove('active');
            document.body.style.overflow = ''; // 스크롤 복구
            currentZoomedGrade = '';
        }

        // 확대 오버레이 배경 클릭 처리
        function handleZoomOverlayClick(event) {
            // 이미지나 버튼 클릭이 아닌 배경 클릭시에만 닫기
            if (event.target === document.getElementById('imageZoomOverlay')) {
                closeImageZoom();
            }
        }

        // 확대 화면에서 선택하기
        function selectFromZoom(event) {
            event.stopPropagation();
            if (currentZoomedGrade) {
                selectGradeInModal(currentZoomedGrade);
                closeImageZoom();
                confirmProductSelection();
            }
        }

        // ESC 키로 이미지 확대 닫기
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageZoom();
            }
        });

        // 상품 선택 확정
        function confirmProductSelection() {
            if (!currentCategory) {
                showToast('상품을 선택해주세요');
                return;
            }

            const data = productData[currentCategory];

            // 선택된 카테고리와 등급 저장
            document.getElementById('selectedCategory').value = currentCategory;
            document.getElementById('selectedGrade').value = currentGradeInModal;

            // 카테고리 탭 버튼 활성화 표시
            document.querySelectorAll('.category-tab-btn').forEach(btn => {
                if (btn.dataset.category === currentCategory) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // 주문서 미리보기 업데이트
            updateOrderPreview();

            // 모달 닫기
            closeProductModal();

            showToast(`${data.name} ${currentGradeInModal}이(가) 선택되었습니다`);
        }

        // 카카오맵 장소 검색 (JavaScript SDK)
        const ps = new kakao.maps.services.Places();
        let currentPage = 1;
        let currentKeyword = '';
        let totalPages = 1;
        let currentPagination = null;

        // 모달 열기
        function openPlaceSearchModal() {
            document.getElementById('placeSearchModal').classList.add('show');
            document.getElementById('placeKeyword').focus();
        }

        // 모달 닫기
        function closePlaceSearchModal() {
            document.getElementById('placeSearchModal').classList.remove('show');
            document.getElementById('placeKeyword').value = '';
            document.getElementById('placesList').innerHTML = '';
            document.getElementById('placePagination').innerHTML = '';
            document.getElementById('placeSearchStatus').textContent = '';
        }

        // 장소 검색
        function searchPlaces(page = 1) {
            const keyword = document.getElementById('placeKeyword').value.trim();

            if (!keyword) {
                showToast('검색어를 입력해주세요');
                return;
            }

            currentKeyword = keyword;
            currentPage = page;

            const listEl = document.getElementById('placesList');
            const statusEl = document.getElementById('placeSearchStatus');
            const paginationEl = document.getElementById('placePagination');

            statusEl.textContent = '검색 중...';
            listEl.innerHTML = '';
            paginationEl.innerHTML = '';

            // SDK의 keywordSearch 사용
            ps.keywordSearch(keyword, function(data, status, pagination) {
                if (status === kakao.maps.services.Status.OK) {
                    statusEl.textContent = '';
                    currentPagination = pagination;
                    displayPlaces(data);
                    displayPaginationSDK(pagination);
                } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
                    statusEl.textContent = '검색 결과가 없습니다.';
                } else {
                    console.error('장소 검색 오류:', status);
                    statusEl.textContent = '검색 중 오류가 발생했습니다.';
                }
            }, { page: page, size: 10 });
        }

        // 검색 결과 목록 표시
        function displayPlaces(places) {
            const listEl = document.getElementById('placesList');
            listEl.innerHTML = '';

            places.forEach(place => {
                const li = document.createElement('li');
                li.className = 'item';

                let itemStr = '<div class="info"><h5>' + place.place_name + '</h5>';

                if (place.road_address_name) {
                    itemStr += '<span>' + place.road_address_name + '</span>';
                    itemStr += '<span class="gray">' + place.address_name + '</span>';
                } else {
                    itemStr += '<span>' + place.address_name + '</span>';
                }

                if (place.phone) {
                    itemStr += '<span class="tel">' + place.phone + '</span>';
                }

                itemStr += '</div>';
                li.innerHTML = itemStr;

                // 클릭 시 장소 선택
                li.onclick = function() {
                    selectPlace(place.place_name, place.road_address_name || place.address_name);
                };

                listEl.appendChild(li);
            });
        }

        // 페이지네이션 표시 (SDK용)
        function displayPaginationSDK(pagination) {
            const paginationEl = document.getElementById('placePagination');
            paginationEl.innerHTML = '';

            const current = pagination.current;
            const total = pagination.last;

            // 최대 5개 페이지 번호 표시
            let startPage = Math.max(1, current - 2);
            let endPage = Math.min(total, startPage + 4);
            if (endPage - startPage < 4) {
                startPage = Math.max(1, endPage - 4);
            }

            for (let i = startPage; i <= endPage; i++) {
                const a = document.createElement('a');
                a.href = '#';
                a.textContent = i;

                if (i === current) {
                    a.className = 'on';
                } else {
                    a.onclick = (function(pageNum) {
                        return function(e) {
                            e.preventDefault();
                            pagination.gotoPage(pageNum);
                        };
                    })(i);
                }

                paginationEl.appendChild(a);
            }
        }

        // 장소 선택
        function selectPlace(placeName, address) {
            const fullAddress = address + ' ' + placeName;
            document.getElementById('orderDeliveryPlace').value = fullAddress;
            closePlaceSearchModal();
            updateOrderPreview();
            showToast('배달장소가 입력되었습니다');
        }

        // 모달 외부 클릭 시 닫기
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('placeSearchModal');
            if (e.target === modal) {
                closePlaceSearchModal();
            }
        });
    </script>

    <!-- 이미지 확대 오버레이 -->
    <div class="image-zoom-overlay" id="imageZoomOverlay" onclick="handleZoomOverlayClick(event)">
        <button class="image-zoom-close" onclick="closeImageZoom()">×</button>
        <img id="zoomedImage" src="" alt="확대 이미지">
        <div class="image-zoom-hint">배경 클릭하여 닫기</div>
        <button class="image-zoom-select-btn" id="zoomSelectBtn" onclick="selectFromZoom(event)">선택하기</button>
    </div>

    <!-- 카톡 문의 플로팅 버튼 -->
    <a href="https://pf.kakao.com/_MGnWn/chat" target="_blank" class="kakao-float-btn">
        <svg viewBox="0 0 24 24"><path d="M12 3C6.5 3 2 6.58 2 11c0 2.84 1.88 5.33 4.7 6.77L5.6 21l4.08-2.41c.76.11 1.53.16 2.32.16 5.5 0 10-3.58 10-8s-4.5-8-10-8z"/></svg>
        <span>문의</span>
    </a>
</body>
</html>
